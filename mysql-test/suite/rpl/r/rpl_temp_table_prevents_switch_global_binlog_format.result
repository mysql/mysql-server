include/master-slave.inc
Warnings:
Note	####	Sending passwords in plain text without SSL/TLS is extremely insecure.
Note	####	Storing MySQL user name or password information in the master info repository is not secure and is therefore not recommended. Please consider using the USER and PASSWORD connection options for START SLAVE; see the 'START SLAVE Syntax' in the MySQL Manual for more information.
[connection master]
[connection slave]
include/stop_slave_sql.inc
#
# Verify that SET @@global.binlog_format is allowed if none
# of all replication channels have open temporary table(s).
#
SET @@global.binlog_format=ROW;
#
# Set binlog format to statement for replicating
# CREATE TEMPORARY TABLE temp1 on master.
#
SET @@global.binlog_format=STATEMENT;
#
# Start slave applier, so that SET @@global.binlog_format=STATEMENT
# takes effect on the default slave channel.
#
include/start_slave_sql.inc
[connection master]
#
# Replicate the 'CREATE TEMPORARY TABLE temp1' to  slave, so that
# the default slave channel has an open temporary table.
#
CREATE TEMPORARY TABLE temp1(a INT);
include/sync_slave_sql_with_master.inc
[connection slave]
include/stop_slave.inc
Warnings:
Warning	3022	This operation may not be safe when the slave has temporary tables. The tables will be kept open until the server restarts or until the tables are deleted by any replicated DROP statement. Suggest to wait until slave_open_temp_tables = 0.
#
# Verify that SET @@global.binlog_format must be disallowed if
# any replication channel has open temporary table(s).
#
SET @@global.binlog_format=ROW;
ERROR HY000: Changing @@global.binlog_format or @@persist.binlog_format is disallowed when any replication channel has open temporary table(s). You could wait until Slave_open_temp_tables = 0 and try again
#
# Verify that SET @@persist.binlog_format must be disallowed if
# any replication channel has open temporary table(s).
#
SET @@persist.binlog_format=ROW;
ERROR HY000: Changing @@global.binlog_format or @@persist.binlog_format is disallowed when any replication channel has open temporary table(s). You could wait until Slave_open_temp_tables = 0 and try again
include/start_slave.inc
[connection master]
DROP TEMPORARY TABLE temp1;
include/rpl_end.inc
