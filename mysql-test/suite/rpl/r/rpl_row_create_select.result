include/master-slave.inc
[connection master]
#
# BUG#17994219: CREATE TABLE .. SELECT PRODUCES INVALID STRUCTURE, 
#               BREAKS RBR 
#
#After the patch, the display width is set to a default
#value of 21.
CREATE TABLE t1 AS SELECT REPEAT('A', 1000) DIV 1 AS a;
Warnings:
Warning	1918	Encountered illegal value '' when converting to DECIMAL
SHOW CREATE TABLE t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` bigint(21) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1
CREATE TABLE t2 AS SELECT CONVERT(REPEAT('A', 255) USING UCS2) DIV 1 AS a;
Warnings:
Warning	1918	Encountered illegal value '' when converting to DECIMAL
SHOW CREATE TABLE t2;
Table	Create Table
t2	CREATE TABLE `t2` (
  `a` bigint(21) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1
#After the patch, no error is reported.
DROP TABLE t1;
DROP TABLE t2;
include/rpl_end.inc
