--source include/have_ujis.inc
--source include/have_innodb.inc

--disable_warnings
drop table if exists `£Τ£±`;
drop table if exists `£Τ£²`;
drop table if exists `£Τ£³`;
drop table if exists `£Τ£΄`;
drop table if exists `£Τ£µ`;
drop table if exists `£Τ£¶`;
drop table if exists `£Τ£·`;
drop table if exists `£Τ£Έ`;
drop table if exists `£Τ£Ή`;
--enable_warnings

#
# Test UNION with Japanese characters in ujis encoding
#

SET NAMES ujis;
SET character_set_database = ujis;

#InnoDB
CREATE TABLE `£Τ£±` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = innodb;
CREATE TABLE `£Τ£²` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = innodb;
CREATE TABLE `£Τ£³` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = innodb;
INSERT INTO `£Τ£±` VALUES('±'),('±'),('¤Ά'),('¤Ά'),('νά'),('νά');
INSERT INTO `£Τ£²` VALUES('²'),('²'),('¤¤'),('¤¤'),('νέ'),('νέ');
INSERT INTO `£Τ£³` VALUES('³'),('³'),('¤¦'),('¤¦'),('νή'),('νή');
SELECT * FROM `£Τ£±` UNION DISTINCT SELECT * FROM `£Τ£²` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION ALL SELECT * FROM `£Τ£²` ORDER BY `£Γ£±`;
(SELECT * FROM `£Τ£±`) UNION (SELECT * FROM `£Τ£²`) UNION (SELECT '¤¦') ORDER BY `£Γ£±`;
(SELECT '¤¦' AS `£Γ£±`) UNION (SELECT * FROM `£Τ£±`) UNION (SELECT * FROM `£Τ£²`) ORDER BY `£Γ£±`;
SELECT `£Γ£±`, COUNT(*) FROM `£Τ£±` GROUP BY `£Γ£±` UNION
SELECT `£Γ£±`, COUNT(*) FROM `£Τ£²` GROUP BY `£Γ£±` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION DISTINCT
SELECT * FROM `£Τ£²` UNION ALL
SELECT * FROM `£Τ£³` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION ALL
SELECT * FROM `£Τ£²` UNION DISTINCT
SELECT * FROM `£Τ£³` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION SELECT REPEAT(`£Γ£±`,5) FROM `£Τ£²` ORDER BY `£Γ£±`;
DROP TABLE `£Τ£±` ;
DROP TABLE `£Τ£²` ;
DROP TABLE `£Τ£³` ;

#MyISAM
CREATE TABLE `£Τ£±` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = MYISAM;
CREATE TABLE `£Τ£²` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = MYISAM;
CREATE TABLE `£Τ£³` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = MYISAM;
INSERT INTO `£Τ£±` VALUES('±'),('±'),('¤Ά'),('¤Ά'),('νά'),('νά');
INSERT INTO `£Τ£²` VALUES('²'),('²'),('¤¤'),('¤¤'),('νέ'),('νέ');
INSERT INTO `£Τ£³` VALUES('³'),('³'),('¤¦'),('¤¦'),('νή'),('νή');
SELECT * FROM `£Τ£±` UNION DISTINCT SELECT * FROM `£Τ£²` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION ALL SELECT * FROM `£Τ£²` ORDER BY `£Γ£±`;
(SELECT * FROM `£Τ£±`) UNION (SELECT * FROM `£Τ£²`) UNION (SELECT '¤¦') ORDER BY `£Γ£±`;
(SELECT '¤¦' AS `£Γ£±`) UNION (SELECT * FROM `£Τ£±`) UNION (SELECT * FROM `£Τ£²`) ORDER BY `£Γ£±`;
SELECT `£Γ£±`, COUNT(*) FROM `£Τ£±` GROUP BY `£Γ£±` UNION
SELECT `£Γ£±`, COUNT(*) FROM `£Τ£²` GROUP BY `£Γ£±` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION DISTINCT
SELECT * FROM `£Τ£²` UNION ALL
SELECT * FROM `£Τ£³` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION ALL
SELECT * FROM `£Τ£²` UNION DISTINCT
SELECT * FROM `£Τ£³` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION SELECT REPEAT(`£Γ£±`,5) FROM `£Τ£²` ORDER BY `£Γ£±`;
DROP TABLE `£Τ£±` ;
DROP TABLE `£Τ£²` ;
DROP TABLE `£Τ£³` ;

#MEMORY
CREATE TABLE `£Τ£±` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = MEMORY;
CREATE TABLE `£Τ£²` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = MEMORY;
CREATE TABLE `£Τ£³` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = MEMORY;
INSERT INTO `£Τ£±` VALUES('±'),('±'),('¤Ά'),('¤Ά'),('νά'),('νά');
INSERT INTO `£Τ£²` VALUES('²'),('²'),('¤¤'),('¤¤'),('νέ'),('νέ');
INSERT INTO `£Τ£³` VALUES('³'),('³'),('¤¦'),('¤¦'),('νή'),('νή');
SELECT * FROM `£Τ£±` UNION DISTINCT SELECT * FROM `£Τ£²` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION ALL SELECT * FROM `£Τ£²` ORDER BY `£Γ£±`;
(SELECT * FROM `£Τ£±`) UNION (SELECT * FROM `£Τ£²`) UNION (SELECT '¤¦') ORDER BY `£Γ£±`;
(SELECT '¤¦' AS `£Γ£±`) UNION (SELECT * FROM `£Τ£±`) UNION (SELECT * FROM `£Τ£²`) ORDER BY `£Γ£±`;
SELECT `£Γ£±`, COUNT(*) FROM `£Τ£±` GROUP BY `£Γ£±` UNION
SELECT `£Γ£±`, COUNT(*) FROM `£Τ£²` GROUP BY `£Γ£±` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION DISTINCT
SELECT * FROM `£Τ£²` UNION ALL
SELECT * FROM `£Τ£³` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION ALL
SELECT * FROM `£Τ£²` UNION DISTINCT
SELECT * FROM `£Τ£³` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION SELECT REPEAT(`£Γ£±`,5) FROM `£Τ£²` ORDER BY `£Γ£±`;
DROP TABLE `£Τ£±` ;
DROP TABLE `£Τ£²` ;
DROP TABLE `£Τ£³` ;

# Test mixed strage engine
CREATE TABLE `£Τ£±` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = InnoDB;
CREATE TABLE `£Τ£²` (`£Γ£±` char(1), INDEX(`£Γ£±`)) DEFAULT CHARSET = ujis engine = MyISAM;
INSERT INTO `£Τ£±` VALUES('±'),('±'),('¤Ά'),('¤Ά'),('νά'),('νά');
INSERT INTO `£Τ£²` VALUES('²'),('²'),('¤¤'),('¤¤'),('νέ'),('νέ');
SELECT * FROM `£Τ£±` UNION DISTINCT SELECT * FROM `£Τ£²` ORDER BY `£Γ£±`;
SELECT * FROM `£Τ£±` UNION ALL SELECT * FROM `£Τ£²` ORDER BY `£Γ£±`;
DROP TABLE `£Τ£±`;
DROP TABLE `£Τ£²`;
