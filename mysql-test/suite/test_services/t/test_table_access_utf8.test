# Test the table_access_service

SET NAMES "utf8mb4";

INSTALL COMPONENT 'file://component_test_table_access';

# MATH

# Schema name
# \u2200 = for each
# \u220A = element
# \u2119 = P

# Table name
# \u2203 = there exists
# \u220A = element
# \u211A = Q (UTF8MB3)
# \u1D54A = S (UTF8MB4)

# Column name
# \u224E = equivalent
# \u22a4 = Truth

SELECT HEX('âˆ€pâˆŠâ„™');
SELECT HEX('âˆƒsâˆŠâ„š');
SELECT HEX('âˆƒsâˆŠğ•Š');
SELECT HEX('s(p)â‰âŠ¤');

CREATE SCHEMA `âˆ€pâˆŠâ„™`;

show databases;

CREATE TABLE `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠâ„š`(`s(p)â‰âŠ¤` VARCHAR(255) CHARACTER SET `utf8mb4`);

CREATE TABLE `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠğ•Š`(`s(p)â‰âŠ¤` VARCHAR(255) CHARACTER SET `utf8mb4`);

use `âˆ€pâˆŠâ„™`;

show tables;

show create table `âˆƒsâˆŠâ„š`;

show create table `âˆƒsâˆŠğ•Š`;

SELECT * FROM `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠâ„š`;

SELECT * FROM `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠğ•Š`;

SELECT test_table_access_driver("MATH-INSERT-UTF8MB3");

SELECT * FROM `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠâ„š`;
TRUNCATE TABLE `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠâ„š`;

SELECT * FROM `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠâ„š`;

SELECT test_table_access_driver("MATH-INSERT-UTF8MB4");

SELECT * FROM `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠğ•Š`;
TRUNCATE TABLE `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠğ•Š`;

SELECT * FROM `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠğ•Š`;

--echo ##################
--echo # SERVER RESTART #
--echo ##################

--source include/restart_mysqld.inc

SELECT * FROM `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠâ„š`;

SELECT * FROM `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠğ•Š`;

DROP TABLE `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠâ„š`;
DROP TABLE `âˆ€pâˆŠâ„™`.`âˆƒsâˆŠğ•Š`;
DROP SCHEMA `âˆ€pâˆŠâ„™`;

UNINSTALL COMPONENT 'file://component_test_table_access';

