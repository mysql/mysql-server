set binlog_format=statement;
RESET MASTER;
drop database if exists my_local_db;
create database my_local_db;
create table my_local_db.my_non_tx_table(a bigint) engine = myisam;
use test;
drop table if exists marker_start;
Warnings:
Note	1051	Unknown table 'test.marker_start'
use my_local_db;
insert into my_non_tx_table(a)
values (1000), (2000), (3000);
use test;
drop table if exists marker_truncate;
Warnings:
Note	1051	Unknown table 'test.marker_truncate'
use performance_schema;
truncate table events_waits_history;
truncate table events_waits_history_long;
use test;
truncate table performance_schema.events_statements_history_long;
truncate table performance_schema.host_cache;
use test;
drop table if exists marker_update;
Warnings:
Note	1051	Unknown table 'test.marker_update'
use performance_schema;
update setup_instruments set enabled='NO';
update setup_instruments set timed='NO';
use test;
update performance_schema.setup_instruments set enabled='YES', timed='YES';
update performance_schema.threads set instrumented='YES';
use test;
drop table if exists marker_insert;
Warnings:
Note	1051	Unknown table 'test.marker_insert'
insert into performance_schema.setup_actors(`user`, `host`, `role`)
values ('XXX', 'XXX', 'XXX'),
('YYY', 'YYY', 'YYY'),
('ZZZ', 'ZZZ', 'ZZZ');
select * from performance_schema.setup_actors
where user in ('XXX', 'YYY', 'ZZZ') order by user;
HOST	USER	ROLE	ENABLED	HISTORY
XXX	XXX	XXX	YES	YES
YYY	YYY	YYY	YES	YES
ZZZ	ZZZ	ZZZ	YES	YES
insert into performance_schema.setup_objects
(object_type, object_schema, object_name, enabled, timed)
values ('TABLE', 'db1', 'aaa', 'YES', 'YES'),
('TABLE', 'db1', 'bbb', 'NO', 'NO'),
('TABLE', 'db2', 'ccc', 'YES', 'NO'),
('TABLE', 'db2', 'ddd', 'NO', 'YES');
select * from performance_schema.setup_objects
where object_schema like 'db%' order by object_name;
OBJECT_TYPE	OBJECT_SCHEMA	OBJECT_NAME	ENABLED	TIMED
TABLE	db1	aaa	YES	YES
TABLE	db1	bbb	NO	NO
TABLE	db2	ccc	YES	NO
TABLE	db2	ddd	NO	YES
use test;
drop table if exists marker_insert_select;
Warnings:
Note	1051	Unknown table 'test.marker_insert_select'
use my_local_db;
insert into my_non_tx_table(a)
select thread_id from performance_schema.threads;
insert into my_non_tx_table(a)
select id from information_schema.processlist;
insert into my_non_tx_table(a)
select thread_id from mysql.general_log;
insert into my_non_tx_table(a)
select thread_id from mysql.slow_log;
insert into my_non_tx_table(a)
select Relay_log_pos from mysql.slave_relay_log_info;
insert into my_non_tx_table(a)
select Master_log_pos from mysql.slave_master_info;
insert into my_non_tx_table(a)
select Relay_log_pos from mysql.slave_worker_info;
use test;
drop table if exists marker_delete;
Warnings:
Note	1051	Unknown table 'test.marker_delete'
delete from performance_schema.setup_actors
where user in ('XXX', 'YYY', 'ZZZ');
delete from performance_schema.setup_objects
where object_schema like 'DB%';
use test;
drop table if exists marker_end;
Warnings:
Note	1051	Unknown table 'test.marker_end'
drop database my_local_db;
include/show_binlog_events.inc
Log_name	Pos	Event_type	Server_id	End_log_pos	Info
binlog.000001	#	Query	#	#	use `test`; create table my_local_db.my_non_tx_table(a bigint) engine = myisam
binlog.000001	#	Query	#	#	use `test`; DROP TABLE IF EXISTS `marker_start` /* generated by server */
binlog.000001	#	Query	#	#	use `test`; DROP TABLE IF EXISTS `marker_truncate` /* generated by server */
binlog.000001	#	Query	#	#	use `test`; DROP TABLE IF EXISTS `marker_update` /* generated by server */
binlog.000001	#	Query	#	#	use `test`; DROP TABLE IF EXISTS `marker_insert` /* generated by server */
binlog.000001	#	Query	#	#	use `test`; DROP TABLE IF EXISTS `marker_insert_select` /* generated by server */
binlog.000001	#	Query	#	#	use `test`; DROP TABLE IF EXISTS `marker_delete` /* generated by server */
binlog.000001	#	Query	#	#	use `test`; DROP TABLE IF EXISTS `marker_end` /* generated by server */
