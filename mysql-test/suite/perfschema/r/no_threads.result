update performance_schema.SETUP_INSTRUMENTS set enabled='NO';
update performance_schema.SETUP_CONSUMERS set enabled='YES';
update performance_schema.SETUP_INSTRUMENTS set enabled='YES'
  where name like "wait/synch/mutex/mysys/THR_LOCK_myisam";
drop table if exists test.t1;
truncate table performance_schema.EVENTS_WAITS_CURRENT;
truncate table performance_schema.EVENTS_WAITS_HISTORY;
truncate table performance_schema.EVENTS_WAITS_HISTORY_LONG;
show variables like "thread_handling";
Variable_name	Value
thread_handling	no-threads
create table test.t1(a int) engine=MYISAM;
show variables like "performance_schema";
Variable_name	Value
performance_schema	ON
show variables like "performance_schema_max_thread%";
Variable_name	Value
performance_schema_max_thread_classes	50
performance_schema_max_thread_instances	10
select count(*) from performance_schema.PROCESSLIST
where name like "thread/sql/main";
count(*)
1
select count(*) from performance_schema.PROCESSLIST
where name like "thread/sql/OneConnection";
count(*)
0
select event_name, operation,
left(source, locate(":", source)) as short_source
from performance_schema.EVENTS_WAITS_CURRENT;
event_name	operation	short_source
wait/synch/mutex/mysys/THR_LOCK_myisam	lock	mi_create.c:
select event_name, operation,
left(source, locate(":", source)) as short_source
from performance_schema.EVENTS_WAITS_HISTORY;
event_name	operation	short_source
wait/synch/mutex/mysys/THR_LOCK_myisam	lock	mi_create.c:
select event_name, operation,
left(source, locate(":", source)) as short_source
from performance_schema.EVENTS_WAITS_HISTORY_LONG;
event_name	operation	short_source
wait/synch/mutex/mysys/THR_LOCK_myisam	lock	mi_create.c:
drop table test.t1;
