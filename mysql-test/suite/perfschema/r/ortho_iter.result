drop procedure if exists check_instrument;
create procedure check_instrument(in instr_name varchar(128))
begin
declare save_count_expected integer;
declare count_expected integer;
declare count_builtin_expected integer;
declare count_global_expected integer;
declare is_wait integer;
declare is_wait_file integer;
declare is_wait_socket integer;
declare is_stage integer;
declare is_statement integer;
declare is_transaction integer;
declare is_memory integer;
declare is_wait_table integer;
declare is_wait_file_table integer;
declare is_wait_socket_table integer;
declare is_stage_table integer;
declare is_statement_table integer;
declare is_transaction_table integer;
declare is_memory_table integer;
declare is_memory_global_table integer;
declare pfs_table_name varchar(64);
declare msg varchar(512);
declare msg_detail varchar(512);
declare cmd_1 varchar(512);
declare cmd_2 varchar(512);
declare done integer default 0;
declare debug integer default 0;
declare pfs_cursor CURSOR FOR
select table_name from information_schema.tables
where table_schema= 'performance_schema'
      and table_name like "%_by_event_name%";
declare continue handler for sqlstate '02000'
    set done = 1;
select (instr_name like "wait/%") or (instr_name like "idle") into is_wait;
select (instr_name like "wait/io/file/%") into is_wait_file;
select (instr_name like "wait/io/socket/%") into is_wait_socket;
select (instr_name like "stage/%") into is_stage;
select (instr_name like "statement/%") into is_statement;
select (instr_name like "memory/%") into is_memory;
select (instr_name like "transaction") into is_transaction;
select instr_name, is_wait, is_wait_file, is_wait_socket, is_stage, is_statement, is_memory, is_transaction;
select count(name)
from performance_schema.setup_instruments
where (name like (concat(instr_name, "%")))
and (not name like "%/abstract/%")
and (not name like "memory/performance_schema/%")
into save_count_expected;
select count(name)
from performance_schema.setup_instruments
where (name like (concat(instr_name, "%")))
and (name like "memory/performance_schema/%")
into count_builtin_expected;
select count(name)
from performance_schema.setup_instruments
where (name like (concat(instr_name, "%")))
and (name in (
"memory/sql/buffered_logs",
"memory/sql/sql_acl_mem",
"memory/sql/sql_acl_memex",
"memory/sql/acl_cache",
"memory/sql/acl_map_cache",
"memory/sql/TABLE_SHARE::mem_root",
"memory/sql/TABLE",
"memory/sql/native_functions",
"memory/sql/Event_basic::mem_root",
"memory/sql/root",
"memory/sql/load_env_plugins",
"memory/sql/plugin_ref",
"memory/sql/plugin_mem_root",
"memory/sql/plugin_bookmark",
"memory/csv/TINA_SHARE",
"memory/sql/tz_storage",
"memory/sql/servers_cache",
"memory/sql/udf_mem"
    ))
into count_global_expected;
set cmd_1= "select count(*) from (select distinct event_name from performance_schema.";
set cmd_2= concat(" where event_name like \"",
                    instr_name,
                    "%\") t into @count_actual");
open pfs_cursor;
repeat
fetch pfs_cursor into pfs_table_name;
if not done then
select (pfs_table_name like "%waits%") into is_wait_table;
select (pfs_table_name like "file_summary%") into is_wait_file_table;
select (pfs_table_name like "socket_summary%") into is_wait_socket_table;
select (pfs_table_name like "%stages%") into is_stage_table;
select (pfs_table_name like "%statements%") into is_statement_table;
select (pfs_table_name like "%memory%") into is_memory_table;
select (pfs_table_name like "memory_summary_global_by_event_name") into is_memory_global_table;
select (pfs_table_name like "%transaction%") into is_transaction_table;
set count_expected = save_count_expected;
if is_memory_global_table
then
set count_expected = save_count_expected + count_builtin_expected;
end if;
if is_memory_table = 1 and is_memory_global_table = 0
then
set count_expected = save_count_expected - count_global_expected;
end if;
select concat("Checking table ", pfs_table_name, " ...") as status;
select concat(cmd_1, pfs_table_name, cmd_2) into @cmd;
if debug = 1
then
select @cmd;
end if;
prepare stmt from @cmd;
execute stmt;
drop prepare stmt;
set msg_detail= concat("table ", pfs_table_name,
", instruments ", count_expected,
", found ", @count_actual);
if is_wait = 1
then
if is_wait_table = 1 and @count_actual <> count_expected
then
set msg= concat("Missing wait events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
if is_wait_table = 0
and is_wait_file_table = 0
and is_wait_socket_table = 0
and @count_actual <> 0
then
set msg= concat("Unexpected wait events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
end if;
if is_wait_file = 1
then
if is_wait_file_table = 1 and @count_actual <> count_expected
then
set msg= concat("Missing wait/io/file events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
if is_wait_table = 0 and is_wait_file_table = 0 and @count_actual <> 0
then
set msg= concat("Unexpected wait/io/file events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
end if;
if is_wait_socket = 1
then
if is_wait_socket_table = 1 and @count_actual <> count_expected
then
set msg= concat("Missing wait/io/socket events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
if is_wait_table = 0 and is_wait_socket_table = 0 and @count_actual <> 0
then
set msg= concat("Unexpected wait/io/socket events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
end if;
if is_stage = 1
then
if is_stage_table = 1 and @count_actual <> count_expected
then
set msg= concat("Missing stage events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
if is_stage_table = 0 and @count_actual <> 0
then
set msg= concat("Unexpected stage events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
end if;
if is_statement = 1
then
if is_statement_table = 1 and @count_actual <> count_expected
then
set msg= concat("Missing statement events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
if is_statement_table = 0 and @count_actual <> 0
then
set msg= concat("Unexpected statement events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
end if;
if is_memory = 1
then
if is_memory_table = 1 and @count_actual <> count_expected
then
set msg= concat("Missing memory events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
if is_memory_table = 0 and @count_actual <> 0
then
set msg= concat("Unexpected memory events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
end if;
if is_transaction = 1
then
if is_transaction_table = 1 and @count_actual <> count_expected
then
set msg= concat("Missing transaction events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
if is_transaction_table = 0 and @count_actual <> 0
then
set msg= concat("Unexpected transaction events: ", msg_detail);
signal sqlstate '05000' set message_text= msg;
end if;
end if;
end if;
until done
end repeat;
close pfs_cursor;
-- Dont want to return a 02000 NOT FOUND, there should be a better way
signal sqlstate '01000' set message_text='Done', mysql_errno=42000;
end
$
call check_instrument("wait/synch/mutex/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/synch/mutex/	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/synch/rwlock/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/synch/rwlock/	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/synch/sxlock/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/synch/sxlock/	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/synch/cond/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/synch/cond/	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/synch/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/synch/	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/io/file/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/io/file/	1	1	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/io/socket/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/io/socket/	1	0	1	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/io/table/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/io/table/	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/io/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/io/	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/lock/table/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/lock/table/	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/lock/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/lock/	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("wait/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
wait/	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("stage/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
stage/	0	0	0	1	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("statement/com/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
statement/com/	0	0	0	0	1	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("statement/sql/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
statement/sql/	0	0	0	0	1	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("statement/abstract/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
statement/abstract/	0	0	0	0	1	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("statement/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
statement/	0	0	0	0	1	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("idle");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
idle	1	0	0	0	0	0	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("memory/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
memory/	0	0	0	0	0	1	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("memory/performance_schema/");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
memory/performance_schema/	0	0	0	0	0	1	0
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
call check_instrument("transaction");
instr_name	is_wait	is_wait_file	is_wait_socket	is_stage	is_statement	is_memory	is_transaction
transaction	0	0	0	0	0	0	1
status
Checking table events_stages_summary_by_account_by_event_name ...
status
Checking table events_stages_summary_by_host_by_event_name ...
status
Checking table events_stages_summary_by_thread_by_event_name ...
status
Checking table events_stages_summary_by_user_by_event_name ...
status
Checking table events_stages_summary_global_by_event_name ...
status
Checking table events_statements_summary_by_account_by_event_name ...
status
Checking table events_statements_summary_by_host_by_event_name ...
status
Checking table events_statements_summary_by_thread_by_event_name ...
status
Checking table events_statements_summary_by_user_by_event_name ...
status
Checking table events_statements_summary_global_by_event_name ...
status
Checking table events_transactions_summary_by_account_by_event_name ...
status
Checking table events_transactions_summary_by_host_by_event_name ...
status
Checking table events_transactions_summary_by_thread_by_event_name ...
status
Checking table events_transactions_summary_by_user_by_event_name ...
status
Checking table events_transactions_summary_global_by_event_name ...
status
Checking table events_waits_summary_by_account_by_event_name ...
status
Checking table events_waits_summary_by_host_by_event_name ...
status
Checking table events_waits_summary_by_thread_by_event_name ...
status
Checking table events_waits_summary_by_user_by_event_name ...
status
Checking table events_waits_summary_global_by_event_name ...
status
Checking table file_summary_by_event_name ...
status
Checking table memory_summary_by_account_by_event_name ...
status
Checking table memory_summary_by_host_by_event_name ...
status
Checking table memory_summary_by_thread_by_event_name ...
status
Checking table memory_summary_by_user_by_event_name ...
status
Checking table memory_summary_global_by_event_name ...
status
Checking table socket_summary_by_event_name ...
Warnings:
Warning	42000	Done
drop procedure check_instrument;
