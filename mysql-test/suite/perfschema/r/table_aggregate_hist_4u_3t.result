Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
Warnings:
Warning	1287	Using GRANT for creating new user is deprecated and will be removed in future release. Create new user with CREATE USER statement.
Warnings:
Warning	1287	Using GRANT for creating new user is deprecated and will be removed in future release. Create new user with CREATE USER statement.
Warnings:
Warning	1287	Using GRANT for creating new user is deprecated and will be removed in future release. Create new user with CREATE USER statement.
Warnings:
Warning	1287	Using GRANT for creating new user is deprecated and will be removed in future release. Create new user with CREATE USER statement.
Warnings:
Warning	3090	Changing sql mode 'NO_AUTO_CREATE_USER' is deprecated. It will be removed in a future release.
select * from performance_schema.setup_actors
order by USER, HOST, ROLE;
HOST	USER	ROLE	ENABLED	HISTORY
localhost	user1	%	YES	YES
localhost	user2	%	YES	YES
localhost	user3	%	YES	YES
localhost	user4	%	YES	YES
select * from performance_schema.setup_objects
order by object_type, object_schema, object_name;
OBJECT_TYPE	OBJECT_SCHEMA	OBJECT_NAME	ENABLED	TIMED
TABLE	test	t1	YES	YES
TABLE	test	t2	YES	NO
TABLE	test	t3	YES	NO
select * from performance_schema.setup_consumers;
NAME	ENABLED
events_stages_current	YES
events_stages_history	YES
events_stages_history_long	YES
events_statements_current	YES
events_statements_history	YES
events_statements_history_long	YES
events_transactions_current	YES
events_transactions_history	YES
events_transactions_history_long	YES
events_waits_current	YES
events_waits_history	YES
events_waits_history_long	YES
global_instrumentation	YES
thread_instrumentation	YES
statements_digest	YES
flush tables;
truncate performance_schema.objects_summary_global_by_type;
truncate performance_schema.table_io_waits_summary_by_index_usage;
truncate performance_schema.table_io_waits_summary_by_table;
truncate performance_schema.table_lock_waits_summary_by_table;
truncate performance_schema.events_waits_summary_by_thread_by_event_name;
truncate performance_schema.events_waits_summary_by_account_by_event_name;
truncate performance_schema.events_waits_summary_by_user_by_event_name;
truncate performance_schema.events_waits_summary_by_host_by_event_name;
truncate performance_schema.events_waits_summary_global_by_event_name;
truncate performance_schema.events_waits_history_long;
show global variables like "performance_schema%";
Variable_name	Value
performance_schema	ON
performance_schema_accounts_size	100
performance_schema_digests_size	200
performance_schema_events_stages_history_long_size	1000
performance_schema_events_stages_history_size	10
performance_schema_events_statements_history_long_size	1000
performance_schema_events_statements_history_size	10
performance_schema_events_transactions_history_long_size	1000
performance_schema_events_transactions_history_size	10
performance_schema_events_waits_history_long_size	10000
performance_schema_events_waits_history_size	10
performance_schema_hosts_size	100
performance_schema_max_cond_classes	80
performance_schema_max_cond_instances	1000
performance_schema_max_digest_length	1024
performance_schema_max_file_classes	80
performance_schema_max_file_handles	32768
performance_schema_max_file_instances	10000
performance_schema_max_index_stat	5000
performance_schema_max_memory_classes	320
performance_schema_max_metadata_locks	10000
performance_schema_max_mutex_classes	210
performance_schema_max_mutex_instances	5000
performance_schema_max_prepared_statements_instances	100
performance_schema_max_program_instances	5000
performance_schema_max_rwlock_classes	40
performance_schema_max_rwlock_instances	5000
performance_schema_max_socket_classes	10
performance_schema_max_socket_instances	1000
performance_schema_max_sql_text_length	1024
performance_schema_max_stage_classes	150
performance_schema_max_statement_classes	193
performance_schema_max_statement_stack	10
performance_schema_max_table_handles	1000
performance_schema_max_table_instances	500
performance_schema_max_table_lock_stat	500
performance_schema_max_thread_classes	50
performance_schema_max_thread_instances	200
performance_schema_session_connect_attrs_size	2048
performance_schema_setup_actors_size	100
performance_schema_setup_objects_size	100
performance_schema_users_size	100
show global status like "performance_schema%";
Variable_name	Value
Performance_schema_accounts_lost	0
Performance_schema_cond_classes_lost	0
Performance_schema_cond_instances_lost	0
Performance_schema_digest_lost	0
Performance_schema_file_classes_lost	0
Performance_schema_file_handles_lost	0
Performance_schema_file_instances_lost	0
Performance_schema_hosts_lost	0
Performance_schema_index_stat_lost	0
Performance_schema_locker_lost	0
Performance_schema_memory_classes_lost	0
Performance_schema_metadata_lock_lost	0
Performance_schema_mutex_classes_lost	0
Performance_schema_mutex_instances_lost	0
Performance_schema_nested_statement_lost	0
Performance_schema_prepared_statements_lost	0
Performance_schema_program_lost	0
Performance_schema_rwlock_classes_lost	0
Performance_schema_rwlock_instances_lost	0
Performance_schema_session_connect_attrs_lost	0
Performance_schema_socket_classes_lost	0
Performance_schema_socket_instances_lost	0
Performance_schema_stage_classes_lost	0
Performance_schema_statement_classes_lost	0
Performance_schema_table_handles_lost	0
Performance_schema_table_instances_lost	0
Performance_schema_table_lock_stat_lost	0
Performance_schema_thread_classes_lost	0
Performance_schema_thread_instances_lost	0
Performance_schema_users_lost	0
"================== Step 1 =================="
call dump_thread();
username	status
user1	not found
username	status
user2	not found
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
execute dump_waits_user;
user	event_name	count_star
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	0
localhost	wait/lock/table/sql/handler	0
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	0
wait/lock/table/sql/handler	0
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	0	0	0	0	0	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	0	0	0	0	0	0	0
TABLE	test	t3	index_b	0	0	0	0	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	0	0	0	0	0	0	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	0	0	0	0	0	0	0
TABLE	test	t2	0	0	0	0	0	0	0
TABLE	test	t3	0	0	0	0	0	0	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	0	0	0	0	0	0	0	0	0	0
TABLE	test	t2	0	0	0	0	0	0	0	0	0	0
TABLE	test	t3	0	0	0	0	0	0	0	0	0	0
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	0
TABLE	test	t2	0
TABLE	test	t3	0
select concat(current_user(), " is connected") as status;
status
user1@localhost is connected
"================== Step 2 =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	0
user1	wait/lock/table/sql/handler	0
username	status
user2	not found
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	0
user1	localhost	wait/lock/table/sql/handler	0
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	0
user1	wait/lock/table/sql/handler	0
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	0
localhost	wait/lock/table/sql/handler	0
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	0
wait/lock/table/sql/handler	0
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	0	0	0	0	0	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	0	0	0	0	0	0	0
TABLE	test	t3	index_b	0	0	0	0	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	0	0	0	0	0	0	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	0	0	0	0	0	0	0
TABLE	test	t2	0	0	0	0	0	0	0
TABLE	test	t3	0	0	0	0	0	0	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	0	0	0	0	0	0	0	0	0	0
TABLE	test	t2	0	0	0	0	0	0	0	0	0	0
TABLE	test	t3	0	0	0	0	0	0	0	0	0	0
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	0
TABLE	test	t2	0
TABLE	test	t3	0
insert into test.t1 set a=101, b=1, c=1;
insert into test.t2 set a=102, b=2, c=2;
insert into test.t2 set a=103, b=3, c=3;
insert into test.t3 set a=104, b=4, c=4;
insert into test.t3 set a=105, b=5, c=5;
insert into test.t3 set a=106, b=6, c=6;
select * from test.t1;
a	b	c	d
101	1	1	0
select * from test.t2;
a	b	c	d
102	2	2	0
103	3	3	0
select * from test.t3;
a	b	c	d
104	4	4	0
105	5	5	0
106	6	6	0
update test.t1 set d=d+1;
update test.t2 set d=d+1;
update test.t3 set d=d+1;
update test.t1 set d=d+1 where a=101;
update test.t2 set d=d+1 where a=101;
update test.t3 set d=d+1 where a=101;
select * from test.t1 force index(index_b) where b=5;
a	b	c	d
select * from test.t2 force index(index_b) where b=5;
a	b	c	d
select * from test.t3 force index(index_b) where b=5;
a	b	c	d
105	5	5	1
"================== con1 marker =================="
"================== Step 3-A =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
username	status
user2	not found
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	32
localhost	wait/lock/table/sql/handler	18
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	32
wait/lock/table/sql/handler	18
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	7	TABLE	test	t1
wait/lock/table/sql/handler	5	TABLE	test	t1
wait/io/table/sql/handler	10	TABLE	test	t2
wait/lock/table/sql/handler	6	TABLE	test	t2
wait/io/table/sql/handler	15	TABLE	test	t3
wait/lock/table/sql/handler	7	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	4	3	1	3	1	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	3	1	2	1	0	2	0
TABLE	test	t2	NULL	7	5	2	5	2	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	3	1	2	1	0	2	0
TABLE	test	t3	NULL	10	7	3	7	3	0	0
TABLE	test	t3	index_b	1	1	0	1	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	4	1	3	1	0	3	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	7	4	3	4	1	2	0
TABLE	test	t2	10	6	4	6	2	2	0
TABLE	test	t3	15	9	6	9	3	3	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	5	2	3	0	0	0	0	2	0	3
TABLE	test	t2	6	2	4	0	0	0	0	2	0	4
TABLE	test	t3	7	2	5	0	0	0	0	2	0	5
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	12
TABLE	test	t2	16
TABLE	test	t3	22
flush tables;
"================== con1 FLUSH =================="
"================== Step 3-B =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
username	status
user2	not found
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	32
localhost	wait/lock/table/sql/handler	18
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	32
wait/lock/table/sql/handler	18
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	7	TABLE	test	t1
wait/lock/table/sql/handler	5	TABLE	test	t1
wait/io/table/sql/handler	10	TABLE	test	t2
wait/lock/table/sql/handler	6	TABLE	test	t2
wait/io/table/sql/handler	15	TABLE	test	t3
wait/lock/table/sql/handler	7	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	4	3	1	3	1	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	3	1	2	1	0	2	0
TABLE	test	t2	NULL	7	5	2	5	2	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	3	1	2	1	0	2	0
TABLE	test	t3	NULL	10	7	3	7	3	0	0
TABLE	test	t3	index_b	1	1	0	1	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	4	1	3	1	0	3	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	7	4	3	4	1	2	0
TABLE	test	t2	10	6	4	6	2	2	0
TABLE	test	t3	15	9	6	9	3	3	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	5	2	3	0	0	0	0	2	0	3
TABLE	test	t2	6	2	4	0	0	0	0	2	0	4
TABLE	test	t3	7	2	5	0	0	0	0	2	0	5
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	12
TABLE	test	t2	16
TABLE	test	t3	22
select concat(current_user(), " is connected") as status;
status
user2@localhost is connected
"================== Step 4 =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
username	event_name	count_star
user2	wait/io/table/sql/handler	0
user2	wait/lock/table/sql/handler	0
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	18
user2	localhost	wait/io/table/sql/handler	0
user2	localhost	wait/lock/table/sql/handler	0
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
user2	wait/io/table/sql/handler	0
user2	wait/lock/table/sql/handler	0
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	32
localhost	wait/lock/table/sql/handler	18
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	32
wait/lock/table/sql/handler	18
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	7	TABLE	test	t1
wait/lock/table/sql/handler	5	TABLE	test	t1
wait/io/table/sql/handler	10	TABLE	test	t2
wait/lock/table/sql/handler	6	TABLE	test	t2
wait/io/table/sql/handler	15	TABLE	test	t3
wait/lock/table/sql/handler	7	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	4	3	1	3	1	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	3	1	2	1	0	2	0
TABLE	test	t2	NULL	7	5	2	5	2	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	3	1	2	1	0	2	0
TABLE	test	t3	NULL	10	7	3	7	3	0	0
TABLE	test	t3	index_b	1	1	0	1	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	4	1	3	1	0	3	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	7	4	3	4	1	2	0
TABLE	test	t2	10	6	4	6	2	2	0
TABLE	test	t3	15	9	6	9	3	3	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	5	2	3	0	0	0	0	2	0	3
TABLE	test	t2	6	2	4	0	0	0	0	2	0	4
TABLE	test	t3	7	2	5	0	0	0	0	2	0	5
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	12
TABLE	test	t2	16
TABLE	test	t3	22
insert into test.t1 set a=201, b=1, c=1;
insert into test.t2 set a=202, b=2, c=2;
insert into test.t2 set a=203, b=3, c=3;
insert into test.t3 set a=204, b=4, c=4;
insert into test.t3 set a=205, b=5, c=5;
insert into test.t3 set a=206, b=6, c=6;
select * from test.t1;
a	b	c	d
101	1	1	2
201	1	1	0
select * from test.t2;
a	b	c	d
102	2	2	1
103	3	3	1
202	2	2	0
203	3	3	0
select * from test.t3;
a	b	c	d
104	4	4	1
105	5	5	1
106	6	6	1
204	4	4	0
205	5	5	0
206	6	6	0
update test.t1 set d=d+1;
update test.t2 set d=d+1;
update test.t3 set d=d+1;
update test.t1 set d=d+1 where a=201;
update test.t2 set d=d+1 where a=201;
update test.t3 set d=d+1 where a=201;
select * from test.t1 force index(index_b) where b=5;
a	b	c	d
select * from test.t2 force index(index_b) where b=5;
a	b	c	d
select * from test.t3 force index(index_b) where b=5;
a	b	c	d
105	5	5	2
205	5	5	1
"================== con2 marker =================="
"================== Step 5 =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
username	event_name	count_star
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	18
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	83
localhost	wait/lock/table/sql/handler	36
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	83
wait/lock/table/sql/handler	36
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	17	TABLE	test	t1
wait/lock/table/sql/handler	10	TABLE	test	t1
wait/io/table/sql/handler	26	TABLE	test	t2
wait/lock/table/sql/handler	12	TABLE	test	t2
wait/io/table/sql/handler	40	TABLE	test	t3
wait/lock/table/sql/handler	14	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	10	8	2	8	2	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	7	2	5	2	0	5	0
TABLE	test	t2	NULL	18	14	4	14	4	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	8	2	6	2	0	6	0
TABLE	test	t3	NULL	26	20	6	20	6	0	0
TABLE	test	t3	index_b	3	3	0	3	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	11	2	9	2	0	9	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	17	10	7	10	2	5	0
TABLE	test	t2	26	16	10	16	4	6	0
TABLE	test	t3	40	25	15	25	6	9	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	10	4	6	0	0	0	0	4	0	6
TABLE	test	t2	12	4	8	0	0	0	0	4	0	8
TABLE	test	t3	14	4	10	0	0	0	0	4	0	10
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	27
TABLE	test	t2	38
TABLE	test	t3	54
select concat(current_user(), " is connected") as status;
status
user3@localhost is connected
"================== Step 6 =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
username	event_name	count_star
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
username	event_name	count_star
user3	wait/io/table/sql/handler	0
user3	wait/lock/table/sql/handler	0
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	18
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	0
user3	localhost	wait/lock/table/sql/handler	0
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	0
user3	wait/lock/table/sql/handler	0
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	83
localhost	wait/lock/table/sql/handler	36
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	83
wait/lock/table/sql/handler	36
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	17	TABLE	test	t1
wait/lock/table/sql/handler	10	TABLE	test	t1
wait/io/table/sql/handler	26	TABLE	test	t2
wait/lock/table/sql/handler	12	TABLE	test	t2
wait/io/table/sql/handler	40	TABLE	test	t3
wait/lock/table/sql/handler	14	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	10	8	2	8	2	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	7	2	5	2	0	5	0
TABLE	test	t2	NULL	18	14	4	14	4	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	8	2	6	2	0	6	0
TABLE	test	t3	NULL	26	20	6	20	6	0	0
TABLE	test	t3	index_b	3	3	0	3	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	11	2	9	2	0	9	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	17	10	7	10	2	5	0
TABLE	test	t2	26	16	10	16	4	6	0
TABLE	test	t3	40	25	15	25	6	9	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	10	4	6	0	0	0	0	4	0	6
TABLE	test	t2	12	4	8	0	0	0	0	4	0	8
TABLE	test	t3	14	4	10	0	0	0	0	4	0	10
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	27
TABLE	test	t2	38
TABLE	test	t3	54
insert into test.t1 set a=301, b=1, c=1;
insert into test.t2 set a=302, b=2, c=2;
insert into test.t2 set a=303, b=3, c=3;
insert into test.t3 set a=304, b=4, c=4;
insert into test.t3 set a=305, b=5, c=5;
insert into test.t3 set a=306, b=6, c=6;
select * from test.t1;
a	b	c	d
101	1	1	3
201	1	1	2
301	1	1	0
select * from test.t2;
a	b	c	d
102	2	2	2
103	3	3	2
202	2	2	1
203	3	3	1
302	2	2	0
303	3	3	0
select * from test.t3;
a	b	c	d
104	4	4	2
105	5	5	2
106	6	6	2
204	4	4	1
205	5	5	1
206	6	6	1
304	4	4	0
305	5	5	0
306	6	6	0
update test.t1 set d=d+1;
update test.t2 set d=d+1;
update test.t3 set d=d+1;
update test.t1 set d=d+1 where a=301;
update test.t2 set d=d+1 where a=301;
update test.t3 set d=d+1 where a=301;
select * from test.t1 force index(index_b) where b=5;
a	b	c	d
select * from test.t2 force index(index_b) where b=5;
a	b	c	d
select * from test.t3 force index(index_b) where b=5;
a	b	c	d
105	5	5	3
205	5	5	2
305	5	5	1
"================== con3 marker =================="
"================== Step 7 =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
username	event_name	count_star
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
username	event_name	count_star
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	18
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	153
localhost	wait/lock/table/sql/handler	54
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	153
wait/lock/table/sql/handler	54
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	30	TABLE	test	t1
wait/lock/table/sql/handler	15	TABLE	test	t1
wait/io/table/sql/handler	48	TABLE	test	t2
wait/lock/table/sql/handler	18	TABLE	test	t2
wait/io/table/sql/handler	75	TABLE	test	t3
wait/lock/table/sql/handler	21	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	18	15	3	15	3	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	12	3	9	3	0	9	0
TABLE	test	t2	NULL	33	27	6	27	6	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	15	3	12	3	0	12	0
TABLE	test	t3	NULL	48	39	9	39	9	0	0
TABLE	test	t3	index_b	6	6	0	6	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	21	3	18	3	0	18	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	30	18	12	18	3	9	0
TABLE	test	t2	48	30	18	30	6	12	0
TABLE	test	t3	75	48	27	48	9	18	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	15	6	9	0	0	0	0	6	0	9
TABLE	test	t2	18	6	12	0	0	0	0	6	0	12
TABLE	test	t3	21	6	15	0	0	0	0	6	0	15
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	45
TABLE	test	t2	66
TABLE	test	t3	96
select concat(current_user(), " is connected") as status;
status
user4@localhost is connected
"================== Step 8 =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
username	event_name	count_star
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
username	event_name	count_star
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
username	event_name	count_star
user4	wait/io/table/sql/handler	0
user4	wait/lock/table/sql/handler	0
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	18
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
user4	localhost	wait/io/table/sql/handler	0
user4	localhost	wait/lock/table/sql/handler	0
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	0
user4	wait/lock/table/sql/handler	0
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	153
localhost	wait/lock/table/sql/handler	54
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	153
wait/lock/table/sql/handler	54
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	30	TABLE	test	t1
wait/lock/table/sql/handler	15	TABLE	test	t1
wait/io/table/sql/handler	48	TABLE	test	t2
wait/lock/table/sql/handler	18	TABLE	test	t2
wait/io/table/sql/handler	75	TABLE	test	t3
wait/lock/table/sql/handler	21	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	18	15	3	15	3	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	12	3	9	3	0	9	0
TABLE	test	t2	NULL	33	27	6	27	6	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	15	3	12	3	0	12	0
TABLE	test	t3	NULL	48	39	9	39	9	0	0
TABLE	test	t3	index_b	6	6	0	6	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	21	3	18	3	0	18	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	30	18	12	18	3	9	0
TABLE	test	t2	48	30	18	30	6	12	0
TABLE	test	t3	75	48	27	48	9	18	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	15	6	9	0	0	0	0	6	0	9
TABLE	test	t2	18	6	12	0	0	0	0	6	0	12
TABLE	test	t3	21	6	15	0	0	0	0	6	0	15
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	45
TABLE	test	t2	66
TABLE	test	t3	96
insert into test.t1 set a=401, b=1, c=1;
insert into test.t2 set a=402, b=2, c=2;
insert into test.t2 set a=403, b=3, c=3;
insert into test.t3 set a=404, b=4, c=4;
insert into test.t3 set a=405, b=5, c=5;
insert into test.t3 set a=406, b=6, c=6;
select * from test.t1;
a	b	c	d
101	1	1	4
201	1	1	3
301	1	1	2
401	1	1	0
select * from test.t2;
a	b	c	d
102	2	2	3
103	3	3	3
202	2	2	2
203	3	3	2
302	2	2	1
303	3	3	1
402	2	2	0
403	3	3	0
select * from test.t3;
a	b	c	d
104	4	4	3
105	5	5	3
106	6	6	3
204	4	4	2
205	5	5	2
206	6	6	2
304	4	4	1
305	5	5	1
306	6	6	1
404	4	4	0
405	5	5	0
406	6	6	0
update test.t1 set d=d+1;
update test.t2 set d=d+1;
update test.t3 set d=d+1;
update test.t1 set d=d+1 where a=401;
update test.t2 set d=d+1 where a=401;
update test.t3 set d=d+1 where a=401;
select * from test.t1 force index(index_b) where b=5;
a	b	c	d
select * from test.t2 force index(index_b) where b=5;
a	b	c	d
select * from test.t3 force index(index_b) where b=5;
a	b	c	d
105	5	5	4
205	5	5	3
305	5	5	2
405	5	5	1
"================== con4 marker =================="
"================== Step 9 =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
username	event_name	count_star
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
username	event_name	count_star
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
username	event_name	count_star
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	18
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
user4	localhost	wait/io/table/sql/handler	89
user4	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	18
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	72
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	72
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	20	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	24	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	28	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	20	8	12	0	0	0	0	8	0	12
TABLE	test	t2	24	8	16	0	0	0	0	8	0	16
TABLE	test	t3	28	8	20	0	0	0	0	8	0	20
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	66
TABLE	test	t2	100
TABLE	test	t3	148
lock tables test.t1 read, test.t2 read, test.t3 read;
unlock tables;
lock tables test.t1 write, test.t2 write, test.t3 write;
unlock tables;
"================== con1 marker =================="
"================== Step 10 =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
username	event_name	count_star
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
username	event_name	count_star
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
username	event_name	count_star
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	24
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
user4	localhost	wait/io/table/sql/handler	89
user4	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	78
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
flush tables;
"================== flush marker =================="
"================== Step 11 =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
username	event_name	count_star
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
username	event_name	count_star
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
username	event_name	count_star
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	24
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
user4	localhost	wait/io/table/sql/handler	89
user4	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	78
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
set global read_only=1;
set global read_only=0;
"================== global read_only marker =================="
"================== Step 12 =================="
call dump_thread();
username	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
username	event_name	count_star
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
username	event_name	count_star
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
username	event_name	count_star
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	24
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
user4	localhost	wait/io/table/sql/handler	89
user4	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	78
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
"================== con1 disconnected =================="
"================== Step 13 =================="
call dump_thread();
username	status
user1	not found
username	event_name	count_star
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
username	event_name	count_star
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
username	event_name	count_star
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	24
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
user4	localhost	wait/io/table/sql/handler	89
user4	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	78
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
"================== con2 disconnected =================="
"================== Step 14 =================="
call dump_thread();
username	status
user1	not found
username	status
user2	not found
username	event_name	count_star
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
username	event_name	count_star
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	24
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
user4	localhost	wait/io/table/sql/handler	89
user4	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	78
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
"================== con3 disconnected =================="
"================== Step 15 =================="
call dump_thread();
username	status
user1	not found
username	status
user2	not found
username	status
user3	not found
username	event_name	count_star
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	24
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
user4	localhost	wait/io/table/sql/handler	89
user4	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	78
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
"================== con4 disconnected =================="
"================== Step 16 =================="
call dump_thread();
username	status
user1	not found
username	status
user2	not found
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	24
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
user4	localhost	wait/io/table/sql/handler	89
user4	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	78
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
truncate performance_schema.events_waits_summary_by_thread_by_event_name;
"================== BY_THREAD truncated =================="
"================== Step 17 =================="
call dump_thread();
username	status
user1	not found
username	status
user2	not found
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	32
user1	localhost	wait/lock/table/sql/handler	24
user2	localhost	wait/io/table/sql/handler	51
user2	localhost	wait/lock/table/sql/handler	18
user3	localhost	wait/io/table/sql/handler	70
user3	localhost	wait/lock/table/sql/handler	18
user4	localhost	wait/io/table/sql/handler	89
user4	localhost	wait/lock/table/sql/handler	18
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	78
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
truncate performance_schema.events_waits_summary_by_account_by_event_name;
"================== BY_ACCOUNT truncated =================="
"================== Step 18 =================="
call dump_thread();
username	status
user1	not found
username	status
user2	not found
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	0
user1	localhost	wait/lock/table/sql/handler	0
user2	localhost	wait/io/table/sql/handler	0
user2	localhost	wait/lock/table/sql/handler	0
user3	localhost	wait/io/table/sql/handler	0
user3	localhost	wait/lock/table/sql/handler	0
user4	localhost	wait/io/table/sql/handler	0
user4	localhost	wait/lock/table/sql/handler	0
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	32
user1	wait/lock/table/sql/handler	24
user2	wait/io/table/sql/handler	51
user2	wait/lock/table/sql/handler	18
user3	wait/io/table/sql/handler	70
user3	wait/lock/table/sql/handler	18
user4	wait/io/table/sql/handler	89
user4	wait/lock/table/sql/handler	18
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	78
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
truncate performance_schema.events_waits_summary_by_user_by_event_name;
"================== BY_USER truncated =================="
"================== Step 19 =================="
call dump_thread();
username	status
user1	not found
username	status
user2	not found
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	0
user1	localhost	wait/lock/table/sql/handler	0
user2	localhost	wait/io/table/sql/handler	0
user2	localhost	wait/lock/table/sql/handler	0
user3	localhost	wait/io/table/sql/handler	0
user3	localhost	wait/lock/table/sql/handler	0
user4	localhost	wait/io/table/sql/handler	0
user4	localhost	wait/lock/table/sql/handler	0
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	0
user1	wait/lock/table/sql/handler	0
user2	wait/io/table/sql/handler	0
user2	wait/lock/table/sql/handler	0
user3	wait/io/table/sql/handler	0
user3	wait/lock/table/sql/handler	0
user4	wait/io/table/sql/handler	0
user4	wait/lock/table/sql/handler	0
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	242
localhost	wait/lock/table/sql/handler	78
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
truncate performance_schema.events_waits_summary_by_host_by_event_name;
"================== BY_HOST truncated =================="
"================== Step 21 =================="
call dump_thread();
username	status
user1	not found
username	status
user2	not found
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	0
user1	localhost	wait/lock/table/sql/handler	0
user2	localhost	wait/io/table/sql/handler	0
user2	localhost	wait/lock/table/sql/handler	0
user3	localhost	wait/io/table/sql/handler	0
user3	localhost	wait/lock/table/sql/handler	0
user4	localhost	wait/io/table/sql/handler	0
user4	localhost	wait/lock/table/sql/handler	0
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	0
user1	wait/lock/table/sql/handler	0
user2	wait/io/table/sql/handler	0
user2	wait/lock/table/sql/handler	0
user3	wait/io/table/sql/handler	0
user3	wait/lock/table/sql/handler	0
user4	wait/io/table/sql/handler	0
user4	wait/lock/table/sql/handler	0
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	0
localhost	wait/lock/table/sql/handler	0
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	242
wait/lock/table/sql/handler	78
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	28	24	4	24	4	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	18	4	14	4	0	14	0
TABLE	test	t2	NULL	52	44	8	44	8	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	24	4	20	4	0	20	0
TABLE	test	t3	NULL	76	64	12	64	12	0	0
TABLE	test	t3	index_b	10	10	0	10	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	34	4	30	4	0	30	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	46	28	18	28	4	14	0
TABLE	test	t2	76	48	28	48	8	20	0
TABLE	test	t3	120	78	42	78	12	30	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	22	9	13	0	0	0	0	9	0	13
TABLE	test	t2	26	9	17	0	0	0	0	9	0	17
TABLE	test	t3	30	9	21	0	0	0	0	9	0	21
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	68
TABLE	test	t2	102
TABLE	test	t3	150
truncate performance_schema.events_waits_summary_global_by_event_name;
"================== GLOBAL truncated =================="
"================== Step 21 =================="
call dump_thread();
username	status
user1	not found
username	status
user2	not found
username	status
user3	not found
username	status
user4	not found
execute dump_waits_account;
user	host	event_name	count_star
user1	localhost	wait/io/table/sql/handler	0
user1	localhost	wait/lock/table/sql/handler	0
user2	localhost	wait/io/table/sql/handler	0
user2	localhost	wait/lock/table/sql/handler	0
user3	localhost	wait/io/table/sql/handler	0
user3	localhost	wait/lock/table/sql/handler	0
user4	localhost	wait/io/table/sql/handler	0
user4	localhost	wait/lock/table/sql/handler	0
execute dump_waits_user;
user	event_name	count_star
user1	wait/io/table/sql/handler	0
user1	wait/lock/table/sql/handler	0
user2	wait/io/table/sql/handler	0
user2	wait/lock/table/sql/handler	0
user3	wait/io/table/sql/handler	0
user3	wait/lock/table/sql/handler	0
user4	wait/io/table/sql/handler	0
user4	wait/lock/table/sql/handler	0
execute dump_waits_host;
host	event_name	count_star
localhost	wait/io/table/sql/handler	0
localhost	wait/lock/table/sql/handler	0
execute dump_waits_global;
event_name	count_star
wait/io/table/sql/handler	0
wait/lock/table/sql/handler	0
execute dump_waits_history;
event_name	count(event_name)	object_type	object_schema	object_name
wait/io/table/sql/handler	46	TABLE	test	t1
wait/lock/table/sql/handler	22	TABLE	test	t1
wait/io/table/sql/handler	76	TABLE	test	t2
wait/lock/table/sql/handler	26	TABLE	test	t2
wait/io/table/sql/handler	120	TABLE	test	t3
wait/lock/table/sql/handler	30	TABLE	test	t3
execute dump_waits_index_io;
object_type	object_schema	object_name	index_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	NULL	0	0	0	0	0	0	0
TABLE	test	t1	index_b	0	0	0	0	0	0	0
TABLE	test	t1	index_cb	0	0	0	0	0	0	0
TABLE	test	t1	PRIMARY	0	0	0	0	0	0	0
TABLE	test	t2	NULL	0	0	0	0	0	0	0
TABLE	test	t2	index_b	0	0	0	0	0	0	0
TABLE	test	t2	index_cb	0	0	0	0	0	0	0
TABLE	test	t2	PRIMARY	0	0	0	0	0	0	0
TABLE	test	t3	NULL	0	0	0	0	0	0	0
TABLE	test	t3	index_b	0	0	0	0	0	0	0
TABLE	test	t3	index_cb	0	0	0	0	0	0	0
TABLE	test	t3	PRIMARY	0	0	0	0	0	0	0
execute dump_waits_table_io;
object_type	object_schema	object_name	count_star	count_read	count_write	count_fetch	count_insert	count_update	count_delete
TABLE	test	t1	0	0	0	0	0	0	0
TABLE	test	t2	0	0	0	0	0	0	0
TABLE	test	t3	0	0	0	0	0	0	0
execute dump_waits_table_lock;
object_type	object_schema	object_name	count_star	count_read	count_write	count_read_normal	count_read_with_shared_locks	count_read_high_priority	count_read_no_insert	count_read_external	count_write_low_priority	count_write_external
TABLE	test	t1	0	0	0	0	0	0	0	0	0	0
TABLE	test	t2	0	0	0	0	0	0	0	0	0	0
TABLE	test	t3	0	0	0	0	0	0	0	0	0	0
execute dump_objects_summary;
object_type	object_schema	object_name	count_star
TABLE	test	t1	0
TABLE	test	t2	0
TABLE	test	t3	0
show global status like "performance_schema%";
Variable_name	Value
Performance_schema_accounts_lost	0
Performance_schema_cond_classes_lost	0
Performance_schema_cond_instances_lost	0
Performance_schema_digest_lost	0
Performance_schema_file_classes_lost	0
Performance_schema_file_handles_lost	0
Performance_schema_file_instances_lost	0
Performance_schema_hosts_lost	0
Performance_schema_index_stat_lost	0
Performance_schema_locker_lost	0
Performance_schema_memory_classes_lost	0
Performance_schema_metadata_lock_lost	0
Performance_schema_mutex_classes_lost	0
Performance_schema_mutex_instances_lost	0
Performance_schema_nested_statement_lost	0
Performance_schema_prepared_statements_lost	0
Performance_schema_program_lost	0
Performance_schema_rwlock_classes_lost	0
Performance_schema_rwlock_instances_lost	0
Performance_schema_session_connect_attrs_lost	0
Performance_schema_socket_classes_lost	0
Performance_schema_socket_instances_lost	0
Performance_schema_stage_classes_lost	0
Performance_schema_statement_classes_lost	0
Performance_schema_table_handles_lost	0
Performance_schema_table_instances_lost	0
Performance_schema_table_lock_stat_lost	0
Performance_schema_thread_classes_lost	0
Performance_schema_thread_instances_lost	0
Performance_schema_users_lost	0
