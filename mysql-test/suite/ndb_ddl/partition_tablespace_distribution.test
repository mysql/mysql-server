--source connect.inc

CREATE LOGFILE GROUP lg1
  ADD UNDOFILE 'undofile.dat'
  INITIAL_SIZE 16M
  UNDO_BUFFER_SIZE = 1M
  ENGINE NDB;

CREATE TABLESPACE ts1
  ADD DATAFILE 'ts1_datafile.dat'
  USE LOGFILE GROUP lg1
  INITIAL_SIZE 64M
  ENGINE NDB;

CREATE TABLESPACE ts2
  ADD DATAFILE 'ts2_datafile.dat'
  USE LOGFILE GROUP lg1
  INITIAL_SIZE 64M
  ENGINE NDB;

CREATE TABLE t1 (
  a INT PRIMARY KEY
)
ENGINE NDB
PARTITION BY RANGE (a)
PARTITIONS 2 (
  PARTITION p1 VALUES LESS THAN (2) TABLESPACE ts1,
  PARTITION p2 VALUES LESS THAN MAXVALUE TABLESPACE ts2);

SHOW CREATE TABLE t1;

INSERT INTO t1 VALUES (1),(10);

--connection mysqld2
--sorted_result
SELECT * FROM t1;

SHOW CREATE TABLE t1;

--connection mysqld5
SHOW CREATE TABLE t1;

--connection mysqld1
DROP TABLE t1;
ALTER TABLESPACE ts1
  DROP DATAFILE 'ts1_datafile.dat';
DROP TABLESPACE ts1;
ALTER TABLESPACE ts2
  DROP DATAFILE 'ts2_datafile.dat';
DROP TABLESPACE ts2;
DROP LOGFILE GROUP lg1
  ENGINE NDB;
