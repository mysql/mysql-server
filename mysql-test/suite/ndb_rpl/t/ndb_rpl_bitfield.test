--source include/have_ndb.inc
--source include/have_binlog_format_mixed_or_row.inc
--source suite/ndb_rpl/ndb_rpl_init_source_replica.inc

#
# Verifies replication of bit fields
#

--connection master
create table t1 ( pk int not null auto_increment primary key, b0 bit(64) not null, b1 bit(64) not null, b2 bit(64) not null, b3
bit(64) not null, b4 bit(64) not null, b5 bit(64) not null, b6 bit(64) not null, b7 bit(64) not null, b8 bit(64) not null, b9 bit(64) not null, b10
bit(64) not null, b11 bit(64) not null, b12 bit(64) not null, b13 bit(64) not null, b14 bit(64) not null, b15 bit(64) not null, b16 bit(64),
b17 bit(64) not null, b18 bit(64) not null, b19 bit(64) not null, b20 bit(64) not null, b21 bit(64) not null, b22 bit(64) not null, b23
bit(64) not null, b24 bit(64) not null, b25 bit(64) not null, b26 bit(64) not null, b27 bit(64) not null, b28 bit(64) not null, b29 bit(64),
b30 bit(64) not null, b31 bit(64) not null, b32 bit(64) not null, b33 bit(64) not null, b34 bit(64) not null, b35 bit(64) not null, b36
bit(64) not null, b37 bit(64) not null, b38 bit(64) not null, b39 bit(64) not null, b40 bit(64) not null, b41 bit(64) not null, b42 bit(64),
b43 bit(64) not null, b44 bit(64) not null, b45 bit(64) not null, b46 bit(64) not null, b47 bit(64) not null, b48 bit(64) not null, b49
bit(64) not null, b50 bit(64) not null, b51 bit(64) not null, b52 bit(64) not null, b53 bit(64) not null, b54 bit(64) not null, b55 bit(64),
b56 bit(64) not null, b57 bit(64) not null, b58 bit(64) not null, b59 bit(64) not null) engine=ndb;

insert into t1
(b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,
b10,b11,b12,b13,b14,b15,b16,b17,b18,b19,
b20,b21,b22,b23,b24,b25,b26,b27,b28,b29,
b30,b31,b32,b33,b34,b35,b36,b37,b38,b39,
b40,b41,b42,b43,b44,b45,b46,b47,b48,b49,
b50,b51,b52,b53,b54,b55,b56,b57,b58,b59
) values 
(
X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',
X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',
X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',
X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',
X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',
X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000',X'0000000000000000'
),
(
X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',
X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',
X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',
X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',
X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',
X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF',X'FFFFFFFFFFFFFFFF'
),
(
X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',
X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',
X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',
X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',
X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',
X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000',X'FFFFFFFF00000000'
),
(
X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',
X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',
X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',
X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',
X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',
X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF',X'00000000FFFFFFFF'
)
;

--sync_slave_with_master
select pk,
hex(b0),hex(b1),hex(b2),hex(b3),hex(b4),hex(b5),hex(b6),hex(b7),hex(b8),hex(b9),
hex(b10),hex(b11),hex(b12),hex(b13),hex(b14),hex(b15),hex(b16),hex(b17),hex(b18),hex(b19),
hex(b20),hex(b21),hex(b22),hex(b23),hex(b24),hex(b25),hex(b26),hex(b27),hex(b28),hex(b29),
hex(b30),hex(b31),hex(b32),hex(b33),hex(b34),hex(b35),hex(b36),hex(b37),hex(b38),hex(b39),
hex(b40),hex(b41),hex(b42),hex(b43),hex(b44),hex(b45),hex(b46),hex(b47),hex(b48),hex(b49),
hex(b50),hex(b51),hex(b52),hex(b53),hex(b54),hex(b55),hex(b56),hex(b57),hex(b58),hex(b59)
 from t1 order by pk;

--connection master
update t1 set b5 = X'0F0F0F0F0F0F0F0F', b15 = X'F0F0F0F0F0F0F0F0', b25 = X'0F0F0F0F0F0F0F0F', b35 = X'F0F0F0F0F0F0F0F0', b45 = X'0F0F0F0F0F0F0F0F', b55 = X'F0F0F0F0F0F0F0F0';

--sync_slave_with_master
select pk,
hex(b0),hex(b1),hex(b2),hex(b3),hex(b4),hex(b5),hex(b6),hex(b7),hex(b8),hex(b9),
hex(b10),hex(b11),hex(b12),hex(b13),hex(b14),hex(b15),hex(b16),hex(b17),hex(b18),hex(b19),
hex(b20),hex(b21),hex(b22),hex(b23),hex(b24),hex(b25),hex(b26),hex(b27),hex(b28),hex(b29),
hex(b30),hex(b31),hex(b32),hex(b33),hex(b34),hex(b35),hex(b36),hex(b37),hex(b38),hex(b39),
hex(b40),hex(b41),hex(b42),hex(b43),hex(b44),hex(b45),hex(b46),hex(b47),hex(b48),hex(b49),
hex(b50),hex(b51),hex(b52),hex(b53),hex(b54),hex(b55),hex(b56),hex(b57),hex(b58),hex(b59)
 from t1 order by pk;

--connection master
DROP TABLE t1;

-- source include/rpl/deinit.inc
