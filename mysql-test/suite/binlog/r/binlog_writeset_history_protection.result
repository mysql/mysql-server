CREATE TABLE t1 (i INT PRIMARY KEY);
SET GLOBAL TRANSACTION_WRITE_SET_EXTRACTION = 'XXHASH64';
SET GLOBAL BINLOG_TRANSACTION_DEPENDENCY_TRACKING = WRITESET;
BEGIN;
INSERT INTO t1 VALUES(1);
SET DEBUG_SYNC="wait_in_get_dependency SIGNAL dep_tracker WAIT_FOR go_ahead_dml";
commit;
SET DEBUG_SYNC= "now WAIT_FOR dep_tracker";
SET GLOBAL BINLOG_TRANSACTION_DEPENDENCY_TRACKING=WRITESET_SESSION;
include/assert.inc [con2 is waiting for LOCK_slave_trans_dep_tracker.]
SET DEBUG_SYNC="now SIGNAL go_ahead_dml";
SET GLOBAL BINLOG_TRANSACTION_DEPENDENCY_TRACKING= TRACKING_MODE;
SET GLOBAL TRANSACTION_WRITE_SET_EXTRACTION= EXTRACTION_ALG;
SET DEBUG_SYNC="RESET";
DROP TABLE t1;
