==== Valid and invlaid values for ugid_next ====
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AUTOMATIC
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
NULL
SET @@SESSION.UGID_NEXT= 'ANONYMOUS';
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
ANONYMOUS
SET @@SESSION.UGID_NEXT= 'AUTOMATIC';
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AUTOMATIC
SET @@SESSION.UGID_NEXT= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:10';
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:10
SET @@SESSION.UGID_NEXT= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:0x10';
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:16
SET @@SESSION.UGID_NEXT= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:010';
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
SET @@SESSION.UGID_NEXT= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:10#';
ERROR 42000: Variable 'ugid_next' can't be set to the value of 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:10#'
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
SET @@SESSION.UGID_NEXT= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1-10';
ERROR 42000: Variable 'ugid_next' can't be set to the value of 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1-10'
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
SET @@SESSION.UGID_NEXT= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1:3';
ERROR 42000: Variable 'ugid_next' can't be set to the value of 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1:3'
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
SET @@SESSION.UGID_NEXT= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1,aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:3';
ERROR 42000: Variable 'ugid_next' can't be set to the value of 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1,aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:3'
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
SET @@SESSION.UGID_NEXT= NULL;
ERROR 42000: Variable 'ugid_next' can't be set to the value of 'NULL'
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
SET @@SESSION.UGID_NEXT= 10;
ERROR 42000: Incorrect argument type to variable 'ugid_next'
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
SET @@SESSION.UGID_NEXT= '10';
ERROR 42000: Variable 'ugid_next' can't be set to the value of '10'
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
SET @@SESSION.UGID_NEXT= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:';
ERROR 42000: Variable 'ugid_next' can't be set to the value of 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:'
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
SET @@SESSION.UGID_NEXT= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:0';
ERROR 42000: Variable 'ugid_next' can't be set to the value of 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:0'
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
SET @@SESSION.UGID_NEXT= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:0x8000000000000000';
ERROR 42000: Variable 'ugid_next' can't be set to the value of 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:0x8000000000000000'
SELECT @@SESSION.UGID_NEXT;
@@SESSION.UGID_NEXT
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:8
==== Valid and invalid values for ugid_next_list ====
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
NULL
SET @@SESSION.UGID_NEXT_LIST= '';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST

SET @@SESSION.UGID_NEXT_LIST= '#';
ERROR 42000: Variable 'ugid_next_list' can't be set to the value of '#'
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST

SET @@SESSION.UGID_NEXT_LIST= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1:aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1';
ERROR 42000: Variable 'ugid_next_list' can't be set to the value of 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1:aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1'
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST

SET @@SESSION.UGID_NEXT_LIST= NULL;
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
NULL
SET @@SESSION.UGID_NEXT_LIST= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:1
SET @@SESSION.UGID_NEXT_LIST= 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb:1-10';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
BBBBBBBB-BBBB-BBBB-BBBB-BBBBBBBBBBBB:1-10
SET @@SESSION.UGID_NEXT_LIST= 'cccccccc-cccc-cccc-cccc-cccccccccccc:1-10:2-20';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
CCCCCCCC-CCCC-CCCC-CCCC-CCCCCCCCCCCC:1-20
SET @@SESSION.UGID_NEXT_LIST= 'dddddddd-dddd-dddd-dddd-dddddddddddd :1-10:11-20';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
DDDDDDDD-DDDD-DDDD-DDDD-DDDDDDDDDDDD:1-20
SET @@SESSION.UGID_NEXT_LIST= 'eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee: 1-10:14-20';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
EEEEEEEE-EEEE-EEEE-EEEE-EEEEEEEEEEEE:1-10:14-20
SET @@SESSION.UGID_NEXT_LIST= 'ffffffff-ffff-ffff-ffff-ffffffffffff:4 -10:1-20';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
FFFFFFFF-FFFF-FFFF-FFFF-FFFFFFFFFFFF:1-20
SET @@SESSION.UGID_NEXT_LIST= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:4- 10:8-20';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:4-20
SET @@SESSION.UGID_NEXT_LIST= 'bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb:4-10 :4-20';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
BBBBBBBB-BBBB-BBBB-BBBB-BBBBBBBBBBBB:4-20
SET @@SESSION.UGID_NEXT_LIST= 'cccccccc-cccc-cccc-cccc-cccccccccccc:4-10:15-20:11-14 ';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
CCCCCCCC-CCCC-CCCC-CCCC-CCCCCCCCCCCC:4-20
SET @@SESSION.UGID_NEXT_LIST= 'dddddddd-dddd-dddd-dddd-dddddddddddd
: 1 - 10,
eeeeeeee-eeee-eeee-eeee-eeeeeeeeeeee	:	 11 -	 20	';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
DDDDDDDD-DDDD-DDDD-DDDD-DDDDDDDDDDDD:1-10,
EEEEEEEE-EEEE-EEEE-EEEE-EEEEEEEEEEEE:11-20
SET @@SESSION.UGID_NEXT_LIST= 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1,bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb:2,cccccccc-cccc-cccc-cccc-cccccccccccc:3';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:1,
BBBBBBBB-BBBB-BBBB-BBBB-BBBBBBBBBBBB:2,
CCCCCCCC-CCCC-CCCC-CCCC-CCCCCCCCCCCC:3
SET @@SESSION.UGID_NEXT_LIST= 'cccccccc-cccc-cccc-cccc-cccccccccccc:1,bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb:2,aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:3';
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:3,
BBBBBBBB-BBBB-BBBB-BBBB-BBBBBBBBBBBB:2,
CCCCCCCC-CCCC-CCCC-CCCC-CCCCCCCCCCCC:1
==== Conditions when all variables are settable / readonly ====
SELECT @@SESSION.UGID_HAS_ONGOING_SUPER_GROUP;
@@SESSION.UGID_HAS_ONGOING_SUPER_GROUP
0
SET UGID_HAS_ONGOING_SUPER_GROUP= 1;
ERROR HY000: Variable 'ugid_has_ongoing_super_group' is a read only variable
SELECT @@GLOBAL.UGID_HAS_ONGOING_SUPER_GROUP;
ERROR HY000: Variable 'ugid_has_ongoing_super_group' is a SESSION variable
SET UGID_NEXT_LIST = NULL, UGID_NEXT = 'AUTOMATIC', UGID_END = 0, UGID_COMMIT = 0;
CREATE TABLE variables (var VARCHAR(100), val VARCHAR(100), id INT PRIMARY KEY AUTO_INCREMENT);
INSERT INTO variables(var, val) VALUES
('ugid_next', '"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1"'),
('ugid_next_list', '"aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1"'),
('ugid_end', '1'),
('ugid_commit', '1');
CREATE FUNCTION f() RETURNS INT BEGIN RETURN 1; END;
CREATE TABLE t1 (a INT);
CREATE USER nonsuper@localhost;
GRANT SELECT ON *.* TO nonsuper@localhost;
---- @@SESSION.ugid_next ----
SELECT @@GLOBAL.ugid_next;
ERROR HY000: Variable 'ugid_next' is a SESSION variable
SET @@GLOBAL.ugid_next= "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1";
ERROR HY000: Variable 'ugid_next' is a SESSION variable and can't be used with SET GLOBAL
CREATE FUNCTION set_var() RETURNS INT BEGIN SET @@SESSION.ugid_next = "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1"; RETURN 1; END;
SELECT set_var();
ERROR HY000: The system variable ugid_next can not be set in stored functions or triggers.
DROP FUNCTION set_var;
CREATE TRIGGER t BEFORE INSERT ON t1 FOR EACH ROW SET @@SESSION.ugid_next = "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1";
INSERT INTO t1 VALUES (1);
ERROR HY000: The system variable ugid_next can not be set in stored functions or triggers.
DROP TRIGGER t;
SET @@SESSION.ugid_next = f()
# must be SUPER
--connection nonsuper
--error 1227 # ER_SPECIFIC_ACCESS_DENIED_ERROR
eval SET @@SESSION.ugid_next = "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1"
--connection default
eval SELECT @@SESSION.ugid_next;
ERROR HY000: The statement 'SET ugid_next' cannot invoke a stored function.
---- @@SESSION.ugid_next_list ----
SELECT @@GLOBAL.ugid_next_list;
ERROR HY000: Variable 'ugid_next_list' is a SESSION variable
SET @@GLOBAL.ugid_next_list= "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1";
ERROR HY000: Variable 'ugid_next_list' is a SESSION variable and can't be used with SET GLOBAL
CREATE FUNCTION set_var() RETURNS INT BEGIN SET @@SESSION.ugid_next_list = "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1"; RETURN 1; END;
SELECT set_var();
ERROR HY000: The system variable ugid_next_list can not be set in stored functions or triggers.
DROP FUNCTION set_var;
CREATE TRIGGER t BEFORE INSERT ON t1 FOR EACH ROW SET @@SESSION.ugid_next_list = "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1";
INSERT INTO t1 VALUES (1);
ERROR HY000: The system variable ugid_next_list can not be set in stored functions or triggers.
DROP TRIGGER t;
SET @@SESSION.ugid_next_list = f()
# must be SUPER
--connection nonsuper
--error 1227 # ER_SPECIFIC_ACCESS_DENIED_ERROR
eval SET @@SESSION.ugid_next_list = "aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1"
--connection default
eval SELECT @@SESSION.ugid_next_list;
ERROR HY000: The statement 'SET ugid_next_list' cannot invoke a stored function.
---- @@SESSION.ugid_end ----
SELECT @@GLOBAL.ugid_end;
ERROR HY000: Variable 'ugid_end' is a SESSION variable
SET @@GLOBAL.ugid_end= 1;
ERROR HY000: Variable 'ugid_end' is a SESSION variable and can't be used with SET GLOBAL
CREATE FUNCTION set_var() RETURNS INT BEGIN SET @@SESSION.ugid_end = 1; RETURN 1; END;
SELECT set_var();
ERROR HY000: The system variable ugid_end can not be set in stored functions or triggers.
DROP FUNCTION set_var;
CREATE TRIGGER t BEFORE INSERT ON t1 FOR EACH ROW SET @@SESSION.ugid_end = 1;
INSERT INTO t1 VALUES (1);
ERROR HY000: The system variable ugid_end can not be set in stored functions or triggers.
DROP TRIGGER t;
SET @@SESSION.ugid_end = f()
# must be SUPER
--connection nonsuper
--error 1227 # ER_SPECIFIC_ACCESS_DENIED_ERROR
eval SET @@SESSION.ugid_end = 1
--connection default
eval SELECT @@SESSION.ugid_end;
ERROR HY000: The statement 'SET ugid_end' cannot invoke a stored function.
---- @@SESSION.ugid_commit ----
SELECT @@GLOBAL.ugid_commit;
ERROR HY000: Variable 'ugid_commit' is a SESSION variable
SET @@GLOBAL.ugid_commit= 1;
ERROR HY000: Variable 'ugid_commit' is a SESSION variable and can't be used with SET GLOBAL
CREATE FUNCTION set_var() RETURNS INT BEGIN SET @@SESSION.ugid_commit = 1; RETURN 1; END;
SELECT set_var();
ERROR HY000: The system variable ugid_commit can not be set in stored functions or triggers.
DROP FUNCTION set_var;
CREATE TRIGGER t BEFORE INSERT ON t1 FOR EACH ROW SET @@SESSION.ugid_commit = 1;
INSERT INTO t1 VALUES (1);
ERROR HY000: The system variable ugid_commit can not be set in stored functions or triggers.
DROP TRIGGER t;
SET @@SESSION.ugid_commit = f()
# must be SUPER
--connection nonsuper
--error 1227 # ER_SPECIFIC_ACCESS_DENIED_ERROR
eval SET @@SESSION.ugid_commit = 1
--connection default
eval SELECT @@SESSION.ugid_commit;
ERROR HY000: The statement 'SET ugid_commit' cannot invoke a stored function.
DROP TABLE t1, variables;
DROP FUNCTION f;
DROP USER nonsuper@localhost;
SET UGID_NEXT_LIST = NULL;
SET UGID_NEXT_LIST = NULL, UGID_NEXT = 'AUTOMATIC', UGID_END = 0, UGID_COMMIT = 0;
CREATE PROCEDURE p ()
BEGIN
SET @@SESSION.UGID_NEXT_LIST = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1-10';
SET @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:50';
SET @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:5';
SET @@SESSION.UGID_COMMIT = 1;
SET @@SESSION.UGID_END = 1;
SET @@SESSION.UGID_NEXT_LIST = NULL;
SET @@SESSION.UGID_NEXT = 'AUTOMATIC';
SET @@SESSION.UGID_COMMIT = 0;
SET @@SESSION.UGID_END = 0;
END|
CALL p();
DROP PROCEDURE p;
==== Conditions for combinations of UGID_NEXT and UGID_NEXT_LIST ====
SET UGID_NEXT_LIST = NULL;
BEGIN;
SET UGID_NEXT_LIST = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1';
ERROR HY000: The system variable ugid_next_list can not be set when there is an ongoing transaction.
SET UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1';
ERROR HY000: The system variable ugid_next can not be set when there is an ongoing transaction.
COMMIT;
SET @@SESSION.UGID_NEXT_LIST = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1', @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:2';
BEGIN;
ERROR HY000: The system variable @@SESSION.UGID_NEXT has value AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:2, which is not listed in @@SESSION.UGID_NEXT_LIST.
SET @@SESSION.UGID_NEXT_LIST = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1-2', @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1';
COMMIT;
SET @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:3';
COMMIT;
ERROR HY000: The system variable @@SESSION.UGID_NEXT has value AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:3, which is not listed in @@SESSION.UGID_NEXT_LIST.
SET @@SESSION.UGID_NEXT = 'AUTOMATIC';
COMMIT;
ERROR HY000: The system variable @@SESSION.UGID_NEXT cannot be 'AUTOMATIC' when @@SESSION.UGID_NEXT_LIST is non-NULL.
SET @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1';
COMMIT;
SET @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:2';
COMMIT;
SET @@SESSION.UGID_NEXT = 'ANONYMOUS';
COMMIT;
SET @@SESSION.UGID_NEXT_LIST = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1-2';
ERROR HY000: When there is an ongoing transaction, the system variable @@SESSION.UGID_NEXT_LIST can not change until after @@SESSION.UGID_COMMIT is set to 1 and a statement executes.
SET @@SESSION.UGID_NEXT_LIST = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:2';
ERROR HY000: When there is an ongoing transaction, the system variable @@SESSION.UGID_NEXT_LIST can not change until after @@SESSION.UGID_COMMIT is set to 1 and a statement executes.
SET @@SESSION.UGID_NEXT_LIST = NULL;
ERROR HY000: When there is an ongoing transaction, the system variable @@SESSION.UGID_NEXT_LIST can not change until after @@SESSION.UGID_COMMIT is set to 1 and a statement executes.
SET @@SESSION.UGID_COMMIT = 1;
COMMIT;
SET @@SESSION.UGID_COMMIT = 0, @@SESSION.UGID_NEXT_LIST = '', @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1';
COMMIT;
ERROR HY000: The system variable @@SESSION.UGID_NEXT has value AAAAAAAA-AAAA-AAAA-AAAA-AAAAAAAAAAAA:1, which is not listed in @@SESSION.UGID_NEXT_LIST.
SET @@SESSION.UGID_NEXT = 'ANONYMOUS', @@SESSION.UGID_COMMIT = 1;
COMMIT;
SET @@SESSION.UGID_NEXT_LIST = NULL, @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1', @@SESSION.UGID_COMMIT = 0;
COMMIT;
SELECT @@SESSION.UGID_NEXT_LIST;
@@SESSION.UGID_NEXT_LIST
NULL
SET @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1';
ERROR HY000: When @@SESSION.UGID_NEXT_LIST == NULL and there is an ongoing transaction, the system variable @@SESSION.UGID_NEXT can not change until after @@SESSION.UGID_COMMIT is set to 1 and a statement executes.
SET @@SESSION.UGID_NEXT_LIST = NULL;
ERROR HY000: When there is an ongoing transaction, the system variable @@SESSION.UGID_NEXT_LIST can not change until after @@SESSION.UGID_COMMIT is set to 1 and a statement executes.
SET @@SESSION.UGID_NEXT_LIST = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1';
ERROR HY000: When there is an ongoing transaction, the system variable @@SESSION.UGID_NEXT_LIST can not change until after @@SESSION.UGID_COMMIT is set to 1 and a statement executes.
SET @@SESSION.UGID_COMMIT = 1;
COMMIT;
SET @@SESSION.UGID_NEXT_LIST = NULL, @@SESSION.UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1', @@SESSION.UGID_END = 1, @@SESSION.UGID_COMMIT = 0;
COMMIT;
ERROR HY000: When UGID_NEXT_LIST = NULL and UGID_NEXT has the form UUID:NUMBER, UGID_END cannot be set if UGID_COMMIT is not set.
SET @@SESSION.UGID_COMMIT = 0, @@SESSION.UGID_NEXT = AUTOMATIC, @@SESSION.UGID_NEXT_LIST = NULL;
==== Conditions for executing transactions ====
SET UGID_NEXT = 'aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa:1', UGID_END = 0, UGID_COMMIT = 1;
COMMIT;
SET UGID_END = 1;
COMMIT;
COMMIT;
