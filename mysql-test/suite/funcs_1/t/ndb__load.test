##### suite/funcs_1/funcs_1/t/ndb__load.test

# ndb tables should be used
#
# 1. Check if ndb is available
--source include/have_ndb.inc
# 2. Set $engine_type
let $engine_type= ndb;

# Decide, if the objects are to be (re)created 
#
# - once at the beginning of a set of testcases ('$NO_REFRESH' <> '' --> TRUE)
#   That means all objects have to be (re)created within the current script.
#
# - per every testscript/case ('$NO_REFRESH' = '' --> FALSE)
#   That means the current script must not (re)create any object and every 
#   testscript/case (re)creates only the objects it needs.

eval SET @NO_REFRESH = IF( '$NO_REFRESH' = '', 0, 1);

let $run= `SELECT @NO_REFRESH`;
if ($run)
{
    # Create some objects needed in many testcases
    USE test;
    --source suite/funcs_1/include/ndb_tb1.inc
    --source suite/funcs_1/include/ndb_tb2.inc
    --source suite/funcs_1/include/ndb_tb3.inc
    --source suite/funcs_1/include/ndb_tb4.inc

    # The database test1 is needed for the VIEW testcases
    --disable_warnings
    DROP DATABASE IF EXISTS test1;
    --enable_warnings
    CREATE DATABASE test1;
    USE test1;
    --source suite/funcs_1/include/ndb_tb2.inc
    USE test;
  
    # These tables are needed for the stored procedure testscases
    --source suite/funcs_1/include/sp_tb.inc
}

