set global innodb_file_format="Barracuda";
set global innodb_file_per_table=1;
set global innodb_large_prefix=1;
DROP TABLE IF EXISTS worklog5743;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000) ,
PRIMARY KEY (col_1_varchar(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_varchar (3072));
SELECT COLUMN_NAME,INDEX_NAME,SUB_PART,INDEX_TYPE FROM
INFORMATION_SCHEMA.STATISTICS WHERE table_name = 'worklog5743' ;
COLUMN_NAME	INDEX_NAME	SUB_PART	INDEX_TYPE
col_1_varchar	PRIMARY	3072	BTREE
col_1_varchar	prefix_idx	3072	BTREE
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_varchar = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743;
col_1_varchar = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_varchar = REPEAT("c", 4000)
WHERE col_1_varchar = REPEAT("a", 4000) AND col_2_varchar = REPEAT("o", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varchar = REPEAT("c", 4000) AND col_2_varchar = REPEAT("o", 4000);
col_1_varchar = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_varchar = REPEAT("b", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743;
col_1_varchar = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_text TEXT (4000) , col_2_text TEXT (4000) ,
PRIMARY KEY (col_1_text(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_text (3072));
SELECT COLUMN_NAME,INDEX_NAME,SUB_PART,INDEX_TYPE FROM
INFORMATION_SCHEMA.STATISTICS WHERE table_name = 'worklog5743' ;
COLUMN_NAME	INDEX_NAME	SUB_PART	INDEX_TYPE
col_1_text	PRIMARY	3072	BTREE
col_1_text	prefix_idx	3072	BTREE
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_text = REPEAT("a", 4000) , col_2_text = REPEAT("o", 4000)
FROM worklog5743;
col_1_text = REPEAT("a", 4000)	col_2_text = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000) AND col_2_text = REPEAT("o", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000) AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("b", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743;
col_1_text = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_mediumtext MEDIUMTEXT , col_2_mediumtext MEDIUMTEXT ,
PRIMARY KEY (col_1_mediumtext(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_mediumtext (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_mediumtext = REPEAT("a", 4000),col_2_mediumtext = REPEAT("o", 4000)
FROM worklog5743;
col_1_mediumtext = REPEAT("a", 4000)	col_2_mediumtext = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_mediumtext = REPEAT("c", 4000)
WHERE col_1_mediumtext = REPEAT("a", 4000)
AND col_2_mediumtext = REPEAT("o", 4000);
SELECT col_1_mediumtext = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_mediumtext = REPEAT("c", 4000)
AND col_2_mediumtext = REPEAT("o", 4000);
col_1_mediumtext = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_mediumtext = REPEAT("b", 4000);
SELECT col_1_mediumtext = REPEAT("c", 4000) FROM worklog5743;
col_1_mediumtext = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_longtext LONGTEXT , col_2_longtext LONGTEXT ,
PRIMARY KEY (col_1_longtext(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_longtext (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_longtext = REPEAT("a", 4000) , col_2_longtext = REPEAT("o", 4000)
FROM worklog5743;
col_1_longtext = REPEAT("a", 4000)	col_2_longtext = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_longtext = REPEAT("c", 4000)
WHERE col_1_longtext = REPEAT("a", 4000)
AND col_2_longtext = REPEAT("o", 4000);
SELECT col_1_longtext = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_longtext = REPEAT("c", 4000)
AND col_2_longtext = REPEAT("o", 4000);
col_1_longtext = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_longtext = REPEAT("b", 4000);
SELECT col_1_longtext = REPEAT("c", 4000) FROM worklog5743;
col_1_longtext = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_blob BLOB (4000) , col_2_blob BLOB (4000) ,
PRIMARY KEY (col_1_blob(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_blob (3072));
SELECT COLUMN_NAME,INDEX_NAME,SUB_PART,INDEX_TYPE FROM
INFORMATION_SCHEMA.STATISTICS WHERE table_name = 'worklog5743' ;
COLUMN_NAME	INDEX_NAME	SUB_PART	INDEX_TYPE
col_1_blob	PRIMARY	3072	BTREE
col_1_blob	prefix_idx	3072	BTREE
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_blob = REPEAT("a", 4000) , col_2_blob = REPEAT("o", 4000)
FROM worklog5743;
col_1_blob = REPEAT("a", 4000)	col_2_blob = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_blob = REPEAT("c", 4000)
WHERE col_1_blob = REPEAT("a", 4000) AND col_2_blob = REPEAT("o", 4000);
SELECT col_1_blob = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_blob = REPEAT("c", 4000) AND col_2_blob = REPEAT("o", 4000);
col_1_blob = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_blob = REPEAT("b", 4000);
SELECT col_1_blob = REPEAT("c", 4000) FROM worklog5743;
col_1_blob = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_mediumblob MEDIUMBLOB  , col_2_mediumblob MEDIUMBLOB  ,
PRIMARY KEY (col_1_mediumblob(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_mediumblob (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_mediumblob = REPEAT("a", 4000),col_2_mediumblob = REPEAT("o", 4000)
FROM worklog5743;
col_1_mediumblob = REPEAT("a", 4000)	col_2_mediumblob = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_mediumblob = REPEAT("c", 4000)
WHERE col_1_mediumblob = REPEAT("a", 4000)
AND col_2_mediumblob = REPEAT("o", 4000);
SELECT col_1_mediumblob = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_mediumblob = REPEAT("c", 4000)
AND col_2_mediumblob = REPEAT("o", 4000);
col_1_mediumblob = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_mediumblob = REPEAT("b", 4000);
SELECT col_1_mediumblob = REPEAT("c", 4000) FROM worklog5743;
col_1_mediumblob = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_longblob LONGBLOB  , col_2_longblob LONGBLOB  ,
PRIMARY KEY (col_1_longblob(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_longblob (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_longblob = REPEAT("a", 4000) , col_2_longblob = REPEAT("o", 4000)
FROM worklog5743;
col_1_longblob = REPEAT("a", 4000)	col_2_longblob = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_longblob = REPEAT("c", 4000)
WHERE col_1_longblob = REPEAT("a", 4000)
AND col_2_longblob = REPEAT("o", 4000);
SELECT col_1_longblob = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_longblob = REPEAT("c", 4000)
AND col_2_longblob = REPEAT("o", 4000);
col_1_longblob = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_longblob = REPEAT("b", 4000);
SELECT col_1_longblob = REPEAT("c", 4000) FROM worklog5743;
col_1_longblob = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varbinary VARBINARY (4000) , col_2_varbinary VARBINARY (4000) ,
PRIMARY KEY (col_1_varbinary(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_varbinary (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_varbinary = REPEAT("a", 4000) , col_2_varbinary = REPEAT("o", 4000)
FROM worklog5743;
col_1_varbinary = REPEAT("a", 4000)	col_2_varbinary = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_varbinary = REPEAT("c", 4000)
WHERE col_1_varbinary = REPEAT("a", 4000)
AND col_2_varbinary = REPEAT("o", 4000);
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varbinary = REPEAT("c", 4000)
AND col_2_varbinary = REPEAT("o", 4000);
col_1_varbinary = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_varbinary = REPEAT("b", 4000);
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743;
col_1_varbinary = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (col_1_char CHAR (255) , col_2_char CHAR (255),
col_3_char CHAR (255), col_4_char CHAR (255),col_5_char CHAR (255),
col_6_char CHAR (255), col_7_char CHAR (255),col_8_char CHAR (255),
col_9_char CHAR (255), col_10_char CHAR (255),col_11_char CHAR (255),
col_12_char CHAR (255), col_13_char CHAR (255),col_14_char CHAR (255)
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 255) , REPEAT("o", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255)
);
CREATE INDEX prefix_idx ON worklog5743(col_1_char(250),col_2_char(250),
col_3_char(250),col_4_char(250),col_5_char(250),col_6_char(250),
col_7_char(250),col_8_char(250),col_9_char(250),col_10_char(250),
col_11_char(250),col_12_char(250),col_13_char(72)
);
INSERT INTO worklog5743 VALUES(REPEAT("b", 255) , REPEAT("p", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255)
);
SELECT col_1_char = REPEAT("a", 255) , col_2_char = REPEAT("o", 255) FROM worklog5743;
col_1_char = REPEAT("a", 255)	col_2_char = REPEAT("o", 255)
1	1
0	0
UPDATE worklog5743 SET col_1_char = REPEAT("c", 255)
WHERE col_1_char = REPEAT("a", 255) AND col_2_char = REPEAT("o", 255);
SELECT col_1_char = REPEAT("c", 255) FROM worklog5743
WHERE col_1_char = REPEAT("c", 255) AND col_2_char = REPEAT("o", 255);
col_1_char = REPEAT("c", 255)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 255) , REPEAT("o", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255),REPEAT("a", 255)
);
DELETE FROM worklog5743 WHERE col_1_char = REPEAT("b", 255);
SELECT col_1_char = REPEAT("c", 255) FROM worklog5743;
col_1_char = REPEAT("c", 255)
1
0
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (col_1_binary BINARY (255) , col_2_binary BINARY (255),
col_3_binary BINARY(255),col_4_binary BINARY (255),col_5_binary BINARY (255),
col_6_binary BINARY(255),col_7_binary BINARY (255),col_8_binary BINARY (255),
col_9_binary BINARY(255),col_10_binary BINARY (255),col_11_binary BINARY (255),
col_12_binary BINARY(255),col_13_binary BINARY (255),col_14_binary BINARY (255)
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 255) , REPEAT("o", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255)
);
CREATE INDEX prefix_idx ON worklog5743(col_1_binary (250),col_2_binary (250),
col_3_binary (250),col_4_binary (250),col_5_binary (250),
col_6_binary (250),col_7_binary (250),col_8_binary (250),
col_9_binary (250),col_10_binary (250),col_11_binary (250),
col_12_binary (250),col_13_binary (72)
);
INSERT INTO worklog5743 VALUES(REPEAT("b", 255) , REPEAT("p", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255)
);
SELECT col_1_binary = REPEAT("a", 255) , col_2_binary = REPEAT("o", 255) FROM worklog5743;
col_1_binary = REPEAT("a", 255)	col_2_binary = REPEAT("o", 255)
1	1
0	0
UPDATE worklog5743 SET col_1_binary = REPEAT("c", 255)
WHERE col_1_binary = REPEAT("a", 255)
AND col_2_binary = REPEAT("o", 255);
SELECT col_1_binary = REPEAT("c", 255) FROM worklog5743
WHERE col_1_binary = REPEAT("c", 255)
AND col_2_binary = REPEAT("o", 255);
col_1_binary = REPEAT("c", 255)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 255) , REPEAT("o", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255),
REPEAT("a", 255) , REPEAT("o", 255), REPEAT("a", 255)
);
DELETE FROM worklog5743 WHERE col_1_binary = REPEAT("b", 255);
SELECT col_1_binary = REPEAT("c", 255) FROM worklog5743;
col_1_binary = REPEAT("c", 255)
1
0
DROP TABLE worklog5743;
CREATE TABLE worklog5743_key2 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000) ,
PRIMARY KEY (col_1_varchar(948))
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=2, engine = innodb;
INSERT INTO worklog5743_key2 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
INSERT INTO worklog5743_key2 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_varchar  = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743_key2;
col_1_varchar  = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743_key2 SET col_1_varchar = REPEAT("c", 4000)
WHERE col_1_varchar = REPEAT("a", 4000) AND col_2_varchar = REPEAT("o", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743_key2
WHERE col_2_varchar = REPEAT("o", 4000);
col_1_varchar = REPEAT("c", 4000)
1
INSERT INTO worklog5743_key2 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743_key2 WHERE col_1_varchar = REPEAT("b", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743_key2;
col_1_varchar = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743_key2;
CREATE TABLE worklog5743_key4 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000) ,
PRIMARY KEY (col_1_varchar(1964))
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=4, engine = innodb;
INSERT INTO worklog5743_key4 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
INSERT INTO worklog5743_key4 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_varchar  = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743_key4;
col_1_varchar  = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743_key4 SET col_1_varchar = REPEAT("c", 4000)
WHERE col_1_varchar = REPEAT("a", 4000)
AND col_2_varchar = REPEAT("o", 4000);
SELECT col_1_varchar = REPEAT("b", 3500) FROM worklog5743_key4
WHERE col_1_varchar = REPEAT("c", 4000) AND col_2_varchar = REPEAT("o", 4000);
col_1_varchar = REPEAT("b", 3500)
0
INSERT INTO worklog5743_key4 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743_key4 WHERE col_1_varchar = REPEAT("b", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743_key4;
col_1_varchar = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743_key4;
CREATE TABLE worklog5743_key8 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000) ,
PRIMARY KEY (col_1_varchar(3072))
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8, engine = innodb;
INSERT INTO worklog5743_key8 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
INSERT INTO worklog5743_key8 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_varchar  = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743_key8;
col_1_varchar  = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743_key8 SET col_1_varchar = REPEAT("c", 4000)
WHERE col_1_varchar = REPEAT("a", 4000) AND col_2_varchar = REPEAT("o", 4000);
SELECT col_1_varchar = REPEAT("b", 3500) FROM worklog5743_key8
WHERE col_1_varchar = REPEAT("c", 4000) AND col_2_varchar = REPEAT("o", 4000);
col_1_varchar = REPEAT("b", 3500)
0
INSERT INTO worklog5743_key8 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743_key8 WHERE col_1_varchar = REPEAT("b", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743_key8;
col_1_varchar = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743_key8;
CREATE TABLE worklog5743_key2 (
col_1_text TEXT (4000) , col_2_text TEXT (4000) ,
PRIMARY KEY (col_1_text(948))
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=2, engine = innodb;
INSERT INTO worklog5743_key2 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
INSERT INTO worklog5743_key2 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_text  = REPEAT("a", 4000) , col_2_text = REPEAT("o", 4000)
FROM worklog5743_key2;
col_1_text  = REPEAT("a", 4000)	col_2_text = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743_key2 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000) AND col_2_text = REPEAT("o", 4000);
SELECT col_1_text = REPEAT("b", 3500) FROM worklog5743_key2
WHERE col_1_text = REPEAT("c", 4000) AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("b", 3500)
0
INSERT INTO worklog5743_key2 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743_key2 WHERE col_1_text = REPEAT("b", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743_key2;
col_1_text = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743_key2;
CREATE TABLE worklog5743_key4 (
col_1_text TEXT (4000) , col_2_text TEXT (4000) ,
PRIMARY KEY (col_1_text(1964))
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=4, engine = innodb;
INSERT INTO worklog5743_key4 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
INSERT INTO worklog5743_key4 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_text  = REPEAT("a", 4000) , col_2_text = REPEAT("o", 4000)
FROM worklog5743_key4;
col_1_text  = REPEAT("a", 4000)	col_2_text = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743_key4 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000) AND col_2_text = REPEAT("o", 4000);
SELECT col_1_text = REPEAT("b", 3500) FROM worklog5743_key4
WHERE col_1_text = REPEAT("c", 4000) AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("b", 3500)
0
INSERT INTO worklog5743_key4 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743_key4 WHERE col_1_text = REPEAT("b", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743_key4;
col_1_text = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743_key4;
CREATE TABLE worklog5743_key8 (
col_1_text TEXT (4000) , col_2_text TEXT (4000) ,
PRIMARY KEY (col_1_text(3072))
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8, engine = innodb;
INSERT INTO worklog5743_key8 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
INSERT INTO worklog5743_key8 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_text  = REPEAT("a", 4000) , col_2_text = REPEAT("o", 4000)
FROM worklog5743_key8;
col_1_text  = REPEAT("a", 4000)	col_2_text = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743_key8 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000) AND col_2_text = REPEAT("o", 4000);
SELECT col_1_text = REPEAT("b", 3500) FROM worklog5743_key8
WHERE col_1_text = REPEAT("c", 4000) AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("b", 3500)
0
INSERT INTO worklog5743_key8 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743_key8 WHERE col_1_text = REPEAT("b", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743_key8;
col_1_text = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743_key8;
CREATE TABLE worklog5743_key2 (
col_1_blob BLOB (4000) , col_2_blob BLOB (4000) ,
PRIMARY KEY (col_1_blob(948))
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=2, engine = innodb;
INSERT INTO worklog5743_key2 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
INSERT INTO worklog5743_key2 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_blob  = REPEAT("a", 4000) , col_2_blob = REPEAT("o", 4000)
FROM worklog5743_key2;
col_1_blob  = REPEAT("a", 4000)	col_2_blob = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743_key2 SET col_1_blob = REPEAT("c", 4000)
WHERE col_1_blob = REPEAT("a", 4000) AND col_2_blob = REPEAT("o", 4000);
SELECT col_1_blob = REPEAT("b", 3500) FROM worklog5743_key2
WHERE col_1_blob = REPEAT("c", 4000) AND col_2_blob = REPEAT("o", 4000);
col_1_blob = REPEAT("b", 3500)
0
INSERT INTO worklog5743_key2 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743_key2 WHERE col_1_blob = REPEAT("b", 4000);
SELECT col_1_blob = REPEAT("c", 4000) FROM worklog5743_key2;
col_1_blob = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743_key2;
CREATE TABLE worklog5743_key4 (
col_1_blob BLOB (4000) , col_2_blob BLOB (4000) ,
PRIMARY KEY (col_1_blob(1964))
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=4, engine = innodb;
INSERT INTO worklog5743_key4 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
INSERT INTO worklog5743_key4 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_blob  = REPEAT("a", 4000) , col_2_blob = REPEAT("o", 4000)
FROM worklog5743_key4;
col_1_blob  = REPEAT("a", 4000)	col_2_blob = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743_key4 SET col_1_blob = REPEAT("c", 4000)
WHERE col_1_blob = REPEAT("a", 4000) AND col_2_blob = REPEAT("o", 4000);
SELECT col_1_blob = REPEAT("b", 3500) FROM worklog5743_key4
WHERE col_1_blob = REPEAT("c", 4000) AND col_2_blob = REPEAT("o", 4000);
col_1_blob = REPEAT("b", 3500)
0
INSERT INTO worklog5743_key4 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743_key4 WHERE col_1_blob = REPEAT("b", 4000);
SELECT col_1_blob = REPEAT("c", 4000) FROM worklog5743_key4;
col_1_blob = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743_key4;
CREATE TABLE worklog5743_key8 (
col_1_blob BLOB (4000) , col_2_blob BLOB (4000) ,
PRIMARY KEY (col_1_blob(3072))
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=8, engine = innodb;
INSERT INTO worklog5743_key8 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
INSERT INTO worklog5743_key8 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_blob  = REPEAT("a", 4000) , col_2_blob = REPEAT("o", 4000)
FROM worklog5743_key8;
col_1_blob  = REPEAT("a", 4000)	col_2_blob = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743_key8 SET col_1_blob = REPEAT("c", 4000)
WHERE col_1_blob = REPEAT("a", 4000) AND col_2_blob = REPEAT("o", 4000);
SELECT col_1_blob = REPEAT("b", 3500) FROM worklog5743_key8
WHERE col_1_blob = REPEAT("c", 4000) AND col_2_blob = REPEAT("o", 4000);
col_1_blob = REPEAT("b", 3500)
0
INSERT INTO worklog5743_key8 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743_key8 WHERE col_1_blob = REPEAT("b", 4000);
SELECT col_1_blob = REPEAT("c", 4000) FROM worklog5743_key8;
col_1_blob = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743_key8;
CREATE TABLE worklog5743 (
col_1_varbinary VARBINARY (4000) , col_2_varchar VARCHAR (4000) ,
col_3_text TEXT (4000), col_4_blob BLOB (4000),col_5_text TEXT (4000),
col_6_varchar VARCHAR (4000), col_7_binary BINARY (255)
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) ,  REPEAT("a", 255)
);
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) , REPEAT("a", 255)
);
SELECT col_1_varbinary = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743;
col_1_varbinary = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_varbinary = REPEAT("c", 4000)
WHERE col_1_varbinary = REPEAT("a", 4000) AND col_2_varchar = REPEAT("o", 4000);
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varbinary = REPEAT("c", 4000) AND col_2_varchar = REPEAT("o", 4000);
col_1_varbinary = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) , REPEAT("a", 255)
);
DELETE FROM worklog5743 WHERE col_1_varbinary = REPEAT("b", 4000);
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743;
col_1_varbinary = REPEAT("c", 4000)
1
0
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varbinary VARBINARY (4000) , col_2_varchar VARCHAR (4000) ,
col_3_text TEXT (4000), col_4_blob BLOB (4000),col_5_text TEXT (4000),
col_6_varchar VARCHAR (4000), col_7_binary BINARY (255)
) ROW_FORMAT=DYNAMIC, engine = innodb;
CREATE INDEX prefix_idx1 ON worklog5743(col_1_varbinary (3072));
CREATE INDEX prefix_idx2 ON worklog5743(col_2_varchar (3072));
CREATE INDEX prefix_idx3 ON worklog5743(col_3_text (3072));
CREATE INDEX prefix_idx4 ON worklog5743(col_4_blob (3072));
CREATE INDEX prefix_idx5 ON worklog5743(col_5_text (3072));
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) ,  REPEAT("a", 255)
);
SELECT col_1_varbinary = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743;
col_1_varbinary = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
ROLLBACK;
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) ,  REPEAT("a", 255)
);
COMMIT;
SELECT col_1_varbinary = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743;
col_1_varbinary = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) , REPEAT("a", 255)
);
ROLLBACK;
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varbinary = REPEAT("c", 4000) AND col_2_varchar = REPEAT("o", 4000);
col_1_varbinary = REPEAT("c", 4000)
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) , REPEAT("a", 255)
);
DELETE FROM worklog5743 WHERE col_1_varbinary = REPEAT("b", 4000);
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743;
col_1_varbinary = REPEAT("c", 4000)
0
0
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_text TEXT (4000) CHARACTER SET 'utf8',
col_2_text TEXT (4000) CHARACTER SET 'utf8',
PRIMARY KEY (col_1_text(1024))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_text (1024));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_text = REPEAT("a", 4000) , col_2_text = REPEAT("o", 4000) FROM worklog5743;
col_1_text = REPEAT("a", 4000)	col_2_text = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000) AND col_2_text = REPEAT("o", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000) AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("b", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743;
col_1_text = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (col_1_varchar VARCHAR (4000) CHARACTER SET 'utf8',
col_2_varchar VARCHAR (4000) CHARACTER SET 'utf8' ,
PRIMARY KEY (col_1_varchar(1024))
) ROW_FORMAT=DYNAMIC, engine = innodb;
ERROR 42000: Row size too large (> max_row_size). Changing some columns to TEXT or BLOB may help. In current row format, BLOB prefix of 0 bytes is stored inline.
CREATE TABLE worklog5743 (
col_1_varbinary VARBINARY (4000) ,
col_2_varchar VARCHAR (4000) CHARACTER SET 'utf8',
col_3_text TEXT (4000) CHARACTER SET 'utf8',
col_4_blob BLOB (4000),col_5_text TEXT (4000),
col_6_varchar VARCHAR (4000), col_7_binary BINARY (255)
) ROW_FORMAT=DYNAMIC, engine = innodb;
CREATE INDEX prefix_idx2 ON worklog5743(col_2_varchar (500));
CREATE INDEX prefix_idx3 ON worklog5743(col_3_text (500));
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) ,  REPEAT("a", 255)
);
SELECT col_1_varbinary = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743;
col_1_varbinary = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
ROLLBACK;
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) ,  REPEAT("a", 255)
);
COMMIT;
SELECT col_1_varbinary = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743;
col_1_varbinary = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) , REPEAT("a", 255)
);
ROLLBACK;
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varbinary = REPEAT("c", 4000)
AND col_2_varchar = REPEAT("o", 4000);
col_1_varbinary = REPEAT("c", 4000)
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000),
REPEAT("a", 4000) , REPEAT("o", 4000), REPEAT("a", 4000),
REPEAT("a", 4000) , REPEAT("a", 255)
);
DELETE FROM worklog5743 WHERE col_1_varbinary = REPEAT("b", 4000);
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743;
col_1_varbinary = REPEAT("c", 4000)
0
0
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_text TEXT (4000) CHARACTER SET 'utf8',
col_2_text TEXT (4000) ,
PRIMARY KEY (col_1_text(1024))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("स", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_text (1024));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_text = REPEAT("स", 4000) , col_2_text = REPEAT("o", 4000)
FROM worklog5743;
col_1_text = REPEAT("स", 4000)	col_2_text = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_text = REPEAT("क", 4000)
WHERE col_1_text = REPEAT("स", 4000) AND col_2_text = REPEAT("o", 4000);
SELECT col_1_text = REPEAT("क", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000) AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("क", 4000)
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("b", 4000);
SELECT col_1_text = REPEAT("क", 4000) FROM worklog5743;
col_1_text = REPEAT("क", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_text TEXT(4000) , col_2_text TEXT(4000) ,
PRIMARY KEY (col_1_text(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 200) , REPEAT("o", 200));
SELECT col_1_text = REPEAT("a", 200) , col_2_text  = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text  = REPEAT("o", 200)
1	1
"In connection 1"
SELECT col_1_text = REPEAT("a", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text = REPEAT("o", 200)
1	1
SELECT COUNT(*) FROM worklog5743;
COUNT(*)
1
"In connection 2"
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("b", 200) , REPEAT("o", 200));
SELECT col_1_text = REPEAT("a", 200) , col_2_text  = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text  = REPEAT("o", 200)
1	1
0	1
"In connection 1"
select @@session.tx_isolation;
@@session.tx_isolation
REPEATABLE-READ
SELECT col_1_text = REPEAT("b", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("b", 200)	col_2_text = REPEAT("o", 200)
0	1
SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
select @@session.tx_isolation;
@@session.tx_isolation
READ-UNCOMMITTED
SELECT col_1_text = REPEAT("b", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("b", 200)	col_2_text = REPEAT("o", 200)
0	1
1	1
SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
START TRANSACTION;
SELECT col_1_text = REPEAT("a", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text = REPEAT("o", 200)
1	1
SELECT COUNT(*) FROM worklog5743;
COUNT(*)
1
"In connection 2"
COMMIT;
"In connection 1"
SELECT col_1_text = REPEAT("b", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("b", 200)	col_2_text = REPEAT("o", 200)
0	1
SELECT col_1_text = REPEAT("a", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text = REPEAT("o", 200)
1	1
SELECT COUNT(*) FROM worklog5743;
COUNT(*)
1
COMMIT;
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_text TEXT(4000) , col_2_text TEXT(4000) ,
PRIMARY KEY (col_1_text(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 200) , REPEAT("o", 200));
SELECT col_1_text = REPEAT("a", 200) , col_2_text  = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text  = REPEAT("o", 200)
1	1
"In connection 1"
SELECT col_1_text = REPEAT("a", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text = REPEAT("o", 200)
1	1
SELECT COUNT(*) FROM worklog5743;
COUNT(*)
1
START TRANSACTION;
"In connection 2"
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("b", 200) , REPEAT("o", 200));
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("a", 200);
SELECT col_1_text = REPEAT("a", 200) , col_2_text  = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text  = REPEAT("o", 200)
0	1
COMMIT;
"In connection 1"
SET SESSION TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
select @@session.tx_isolation;
@@session.tx_isolation
READ-UNCOMMITTED
SELECT col_1_text = REPEAT("b", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("b", 200)	col_2_text = REPEAT("o", 200)
1	1
SET SESSION TRANSACTION ISOLATION LEVEL REPEATABLE READ;
SELECT col_1_text = REPEAT("b", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("b", 200)	col_2_text = REPEAT("o", 200)
1	1
SELECT COUNT(*) FROM worklog5743;
COUNT(*)
1
COMMIT;
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_text TEXT(4000) , col_2_text TEXT(4000) ,
PRIMARY KEY (col_1_text(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 200) , REPEAT("o", 200));
SELECT col_1_text = REPEAT("a", 200) , col_2_text  = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text  = REPEAT("o", 200)
1	1
"In connection 1"
SELECT col_1_text = REPEAT("a", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text = REPEAT("o", 200)
1	1
SELECT COUNT(*) FROM worklog5743;
COUNT(*)
1
START TRANSACTION;
"In connection 2"
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("b", 200) , REPEAT("o", 200));
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("a", 200);
SELECT col_1_text = REPEAT("a", 200) , col_2_text  = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("a", 200)	col_2_text  = REPEAT("o", 200)
0	1
ROLLBACK;
"In connection 1"
SELECT col_1_text = REPEAT("b", 200) , col_2_text = REPEAT("o", 200) FROM
worklog5743;
col_1_text = REPEAT("b", 200)	col_2_text = REPEAT("o", 200)
0	1
SELECT COUNT(*) FROM worklog5743;
COUNT(*)
1
COMMIT;
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000) ,
PRIMARY KEY (col_1_varchar(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_varchar (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_varchar = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743;
col_1_varchar = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_varchar = REPEAT("c", 4000)
WHERE col_1_varchar = REPEAT("a", 4000)
AND col_2_varchar = REPEAT("o", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varchar = REPEAT("c", 4000)
AND col_2_varchar = REPEAT("o", 4000);
col_1_varchar = REPEAT("c", 4000)
1
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743;
col_1_varchar = REPEAT("c", 4000)
0
0
1
SELECT tbl1.col_1_varchar = tbl2.col_1_varchar
FROM worklog5743 tbl1 , worklog5743 tbl2
WHERE tbl1.col_1_varchar = tbl2.col_1_varchar ;
tbl1.col_1_varchar = tbl2.col_1_varchar
1
1
1
SELECT tbl1.col_1_varchar = REPEAT("c", 4000) FROM worklog5743 tbl1
WHERE col_1_varchar IN (SELECT tbl2.col_1_varchar FROM worklog5743 tbl2) ;
tbl1.col_1_varchar = REPEAT("c", 4000)
0
0
1
SELECT tbl1.col_1_varchar = REPEAT("c", 4000) FROM worklog5743 tbl1
WHERE col_1_varchar NOT IN (SELECT tbl2.col_1_varchar FROM worklog5743 tbl2) ;
tbl1.col_1_varchar = REPEAT("c", 4000)
SELECT tbl1.col_1_varchar = REPEAT("c", 4000) FROM worklog5743 tbl1 WHERE
col_1_varchar IN (SELECT tbl2.col_1_varchar FROM worklog5743 tbl2)
AND col_1_varchar = REPEAT("c", 4000);
tbl1.col_1_varchar = REPEAT("c", 4000)
1
SELECT tbl1.col_1_varchar = REPEAT("c", 4000) FROM worklog5743 tbl1
WHERE col_1_varchar in (
SELECT tbl2.col_1_varchar FROM worklog5743 tbl2
WHERE tbl1.col_1_varchar != tbl2.col_1_varchar
) ;
tbl1.col_1_varchar = REPEAT("c", 4000)
SELECT tbl1.col_1_varchar = REPEAT("c", 4000) FROM worklog5743 tbl1
WHERE col_1_varchar in (
SELECT tbl2.col_1_varchar FROM worklog5743 tbl2
WHERE tbl1.col_1_varchar = tbl2.col_1_varchar
) ;
tbl1.col_1_varchar = REPEAT("c", 4000)
0
0
1
SELECT
REVERSE(col_1_varchar) = REPEAT("c", 4000) ,
REVERSE(REVERSE(col_1_varchar)) = REPEAT("c", 4000)
FROM worklog5743;
REVERSE(col_1_varchar) = REPEAT("c", 4000)	REVERSE(REVERSE(col_1_varchar)) = REPEAT("c", 4000)
0	0
0	0
1	1
SELECT
UPPER(col_1_varchar) = REPEAT("c", 4000) ,
UPPER(col_1_varchar) = REPEAT("C", 4000) ,
LOWER(UPPER(col_1_varchar)) = REPEAT("c", 4000)
FROM worklog5743;
UPPER(col_1_varchar) = REPEAT("c", 4000)	UPPER(col_1_varchar) = REPEAT("C", 4000)	LOWER(UPPER(col_1_varchar)) = REPEAT("c", 4000)
0	0	0
0	0	0
1	1	1
SELECT
col_1_varchar = REPEAT("c", 4000)
FROM worklog5743 WHERE col_1_varchar like '%c__%';
col_1_varchar = REPEAT("c", 4000)
1
SELECT SUBSTRING(INSERT(col_1_varchar, 1, 4, 'kkkk'),1,10) FROM worklog5743 ;
SUBSTRING(INSERT(col_1_varchar, 1, 4, 'kkkk'),1,10)
kkkkaaaaaa
kkkkbbbbbb
kkkkcccccc
SELECT CONCAT(SUBSTRING(col_1_varchar,-5,3),'append') FROM worklog5743 ;
CONCAT(SUBSTRING(col_1_varchar,-5,3),'append')
aaaappend
bbbappend
cccappend
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR (4000) ,
col_2_varchar VARCHAR (4000) ,
UNIQUE INDEX (col_1_varchar(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743
VALUES(concat(REPEAT("a", 2000),REPEAT("b", 1000),REPEAT("c", 1000)), REPEAT("o", 4000));
INSERT INTO worklog5743
VALUES(concat(REPEAT("a", 2000),REPEAT("b", 2000)), REPEAT("o", 4000));
INSERT INTO worklog5743 VALUES(NULL,NULL);
INSERT INTO worklog5743 VALUES(NULL,NULL);
SELECT COLUMN_NAME,INDEX_NAME,SUB_PART,INDEX_TYPE
FROM INFORMATION_SCHEMA.STATISTICS WHERE table_name = 'worklog5743' ;
COLUMN_NAME	INDEX_NAME	SUB_PART	INDEX_TYPE
col_1_varchar	col_1_varchar	3072	BTREE
SELECT col_1_varchar FROM worklog5743 WHERE col_1_varchar IS NULL;
col_1_varchar
NULL
NULL
SELECT col_1_varchar = concat(REPEAT("a", 2000),REPEAT("b", 2000))
FROM worklog5743 WHERE col_1_varchar IS NOT NULL ORDER BY 1;
col_1_varchar = concat(REPEAT("a", 2000),REPEAT("b", 2000))
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000) ,
PRIMARY KEY (col_1_varchar(3072))) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_varchar (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
DROP INDEX prefix_idx ON worklog5743;
SELECT col_1_varchar = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743;
col_1_varchar = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_varchar = REPEAT("c", 4000)
WHERE col_1_varchar = REPEAT("a", 4000) AND col_2_varchar = REPEAT("o", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varchar = REPEAT("c", 4000) AND col_2_varchar = REPEAT("o", 4000);
col_1_varchar = REPEAT("c", 4000)
1
CREATE INDEX prefix_idx ON worklog5743(col_1_varchar (3072));
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
DELETE FROM worklog5743 WHERE col_1_varchar = REPEAT("b", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743;
col_1_varchar = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000) ,
PRIMARY KEY `prefix_primary` (col_1_varchar(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_varchar (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
ALTER TABLE worklog5743 DROP PRIMARY KEY;
SELECT col_1_varchar = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743;
col_1_varchar = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_varchar = REPEAT("c", 4000)
WHERE col_1_varchar = REPEAT("a", 4000)
AND col_2_varchar = REPEAT("o", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varchar = REPEAT("c", 4000)
AND col_2_varchar = REPEAT("o", 4000);
col_1_varchar = REPEAT("c", 4000)
1
ALTER TABLE worklog5743 ADD PRIMARY KEY (col_1_varchar(3072));
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
ERROR 23000: Duplicate entry 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' for key 'PRIMARY'
DELETE FROM worklog5743 WHERE col_1_varchar = REPEAT("b", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743;
col_1_varchar = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000) ,
PRIMARY KEY `prefix_primary` (col_1_varchar(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_varchar (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
ALTER TABLE worklog5743 DROP PRIMARY KEY;
DROP INDEX prefix_idx ON worklog5743;
SELECT col_1_varchar = REPEAT("a", 4000) , col_2_varchar = REPEAT("o", 4000)
FROM worklog5743;
col_1_varchar = REPEAT("a", 4000)	col_2_varchar = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_varchar = REPEAT("c", 4000)
WHERE col_1_varchar = REPEAT("a", 4000) AND col_2_varchar = REPEAT("o", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varchar = REPEAT("c", 4000) AND col_2_varchar = REPEAT("o", 4000);
col_1_varchar = REPEAT("c", 4000)
1
ALTER TABLE worklog5743 ADD PRIMARY KEY (col_1_varchar(3072));
CREATE INDEX prefix_idx ON worklog5743(col_1_varchar (3072));
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
ERROR 23000: Duplicate entry 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' for key 'PRIMARY'
DELETE FROM worklog5743 WHERE col_1_varchar = REPEAT("b", 4000);
SELECT col_1_varchar = REPEAT("c", 4000) FROM worklog5743;
col_1_varchar = REPEAT("c", 4000)
0
1
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR(4000) , col_2_varchar VARCHAR(4000) ,
PRIMARY KEY (col_1_varchar (3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("c", 3500) , REPEAT("o", 3500));
CREATE INDEX prefix_idx ON worklog5743(col_1_varchar (3072));
" Switching to con1 connection For select "
SELECT col_1_varchar = REPEAT("c", 3500) , col_2_varchar = REPEAT("o", 3500)
FROM worklog5743;
col_1_varchar = REPEAT("c", 3500)	col_2_varchar = REPEAT("o", 3500)
1	1
" Switching to default connection For DMLs "
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("a", 3500) , REPEAT("o", 3500));
SELECT col_1_varchar = REPEAT("b", 3500) FROM worklog5743
WHERE col_2_varchar = REPEAT("o", 3500);
col_1_varchar = REPEAT("b", 3500)
0
0
COMMIT;
" Switching to con1 connection For Dropping index and some DMLs "
START TRANSACTION;
INSERT INTO worklog5743 VALUES(REPEAT("k", 3500),REPEAT("p", 3500));
ALTER TABLE worklog5743 DROP PRIMARY KEY;
UPDATE worklog5743 SET col_1_varchar  = REPEAT("b", 3500)
WHERE col_1_varchar = REPEAT("a", 3500)
AND col_2_varchar = REPEAT("o", 3500);
SELECT col_1_varchar = REPEAT("b", 3500) FROM worklog5743
WHERE col_2_varchar = REPEAT("o", 3500);
col_1_varchar = REPEAT("b", 3500)
1
0
" Switching to default connection For DELETE "
DELETE FROM worklog5743 WHERE col_1_varchar  = REPEAT("b", 3500);
SELECT col_1_varchar = REPEAT("a", 3500) FROM worklog5743
WHERE col_2_varchar = REPEAT("p", 3500);
col_1_varchar = REPEAT("a", 3500)
0
" Switching to con1 connection to commit changes "
COMMIT;
" Switching to default connection to drop and end sub-test "
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varbinary VARBINARY (4000) , col_2_varbinary VARBINARY (4000) ,
PRIMARY KEY (col_1_varbinary(3072))) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_varbinary (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_varbinary = REPEAT("a", 4000) , col_2_varbinary = REPEAT("o", 4000)
FROM worklog5743;
col_1_varbinary = REPEAT("a", 4000)	col_2_varbinary = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_varbinary = REPEAT("c", 4000)
WHERE col_1_varbinary = REPEAT("a", 4000)
AND col_2_varbinary = REPEAT("o", 4000);
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varbinary = REPEAT("c", 4000)
AND col_2_varbinary = REPEAT("o", 4000);
col_1_varbinary = REPEAT("c", 4000)
1
DELETE FROM worklog5743 WHERE col_1_varbinary = REPEAT("c", 4000);
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varbinary = REPEAT("c", 4000)
AND col_2_varbinary = REPEAT("o", 4000);
col_1_varbinary = REPEAT("c", 4000)
DROP INDEX prefix_idx ON worklog5743;
SELECT col_1_varbinary = REPEAT("b", 4000) FROM worklog5743
WHERE col_1_varbinary = REPEAT("b", 4000)
AND col_2_varbinary = REPEAT("p", 4000);
col_1_varbinary = REPEAT("b", 4000)
1
CREATE INDEX prefix_idx ON worklog5743(col_1_varbinary (2000));
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
SELECT col_1_varbinary = REPEAT("a", 4000) FROM worklog5743;
col_1_varbinary = REPEAT("a", 4000)
1
0
UPDATE worklog5743 SET col_1_varbinary = REPEAT("c", 4000)
WHERE col_1_varbinary = REPEAT("a", 4000)
AND col_2_varbinary = REPEAT("o", 4000);
DELETE FROM worklog5743 WHERE col_1_varbinary = REPEAT("c", 4000);
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varbinary = REPEAT("c", 4000)
AND col_2_varbinary = REPEAT("o", 4000);
col_1_varbinary = REPEAT("c", 4000)
DROP INDEX prefix_idx ON worklog5743;
CREATE INDEX prefix_idx ON worklog5743(col_1_varbinary (4000));
Warnings:
Warning	1071	Specified key was too long; max key length is 3072 bytes
Warning	1071	Specified key was too long; max key length is 3072 bytes
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
SELECT col_1_varbinary = REPEAT("a", 4000) FROM worklog5743;
col_1_varbinary = REPEAT("a", 4000)
1
0
UPDATE worklog5743 SET col_1_varbinary = REPEAT("c", 4000)
WHERE col_1_varbinary = REPEAT("a", 4000)
AND col_2_varbinary = REPEAT("o", 4000);
DELETE FROM worklog5743 WHERE col_1_varbinary = REPEAT("c", 4000);
SELECT col_1_varbinary = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_varbinary = REPEAT("c", 4000)
AND col_2_varbinary = REPEAT("o", 4000);
col_1_varbinary = REPEAT("c", 4000)
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (col_1_text TEXT (4000) , col_2_text TEXT (4000) ,
PRIMARY KEY (col_1_text(500))
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
CREATE INDEX prefix_idx ON worklog5743(col_1_text (3072));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_text = REPEAT("a", 4000) , col_2_text = REPEAT("o", 4000)
FROM worklog5743;
col_1_text = REPEAT("a", 4000)	col_2_text = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000)
AND col_2_text = REPEAT("o", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000) AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("c", 4000)
1
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("c", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000) AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("c", 4000)
DROP INDEX prefix_idx ON worklog5743;
SELECT col_1_text = REPEAT("b", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("b", 4000) AND col_2_text = REPEAT("p", 4000);
col_1_text = REPEAT("b", 4000)
1
CREATE INDEX prefix_idx ON worklog5743(col_1_text (1000));
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
SELECT col_1_text = REPEAT("a", 4000) FROM worklog5743;
col_1_text = REPEAT("a", 4000)
1
0
UPDATE worklog5743 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000) AND col_2_text = REPEAT("o", 4000);
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("c", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000) AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("c", 4000)
DROP INDEX prefix_idx ON worklog5743;
CREATE INDEX prefix_idx ON worklog5743(col_1_text (4000));
Warnings:
Warning	1071	Specified key was too long; max key length is 3072 bytes
Warning	1071	Specified key was too long; max key length is 3072 bytes
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
SELECT col_1_text = REPEAT("a", 4000) FROM worklog5743;
col_1_text = REPEAT("a", 4000)
1
0
UPDATE worklog5743 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000) AND col_2_text = REPEAT("o", 4000);
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("c", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000) AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("c", 4000)
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_text TEXT (4000) , col_2_text TEXT (4000) ,
PRIMARY KEY (col_1_text(948))
) ROW_FORMAT=COMPRESSED KEY_BLOCK_SIZE=2, engine = innodb;
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000) , REPEAT("o", 4000));
INSERT INTO worklog5743 VALUES(REPEAT("b", 4000) , REPEAT("p", 4000));
SELECT col_1_text = REPEAT("a", 4000) , col_2_text = REPEAT("o", 4000) FROM worklog5743;
col_1_text = REPEAT("a", 4000)	col_2_text = REPEAT("o", 4000)
1	1
0	0
UPDATE worklog5743 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000)
AND col_2_text = REPEAT("o", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000)
AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("c", 4000)
1
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("c", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000)
AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("c", 4000)
ALTER TABLE worklog5743 DROP PRIMARY KEY;
SELECT col_1_text = REPEAT("b", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("b", 4000)
AND col_2_text = REPEAT("p", 4000);
col_1_text = REPEAT("b", 4000)
1
ALTER TABLE worklog5743 ADD PRIMARY KEY (col_1_text (700));
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
SELECT col_1_text = REPEAT("a", 4000) FROM worklog5743;
col_1_text = REPEAT("a", 4000)
1
0
UPDATE worklog5743 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000)
AND col_2_text = REPEAT("o", 4000);
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("c", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000)
AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("c", 4000)
ALTER TABLE worklog5743 DROP PRIMARY KEY;
ALTER TABLE worklog5743 ADD PRIMARY KEY (col_1_text (950));
ERROR HY000: Too big row
INSERT INTO worklog5743 VALUES(REPEAT("a", 4000),REPEAT("o", 4000));
SELECT col_1_text = REPEAT("a", 4000) FROM worklog5743;
col_1_text = REPEAT("a", 4000)
0
1
UPDATE worklog5743 SET col_1_text = REPEAT("c", 4000)
WHERE col_1_text = REPEAT("a", 4000)
AND col_2_text = REPEAT("o", 4000);
DELETE FROM worklog5743 WHERE col_1_text = REPEAT("c", 4000);
SELECT col_1_text = REPEAT("c", 4000) FROM worklog5743
WHERE col_1_text = REPEAT("c", 4000)
AND col_2_text = REPEAT("o", 4000);
col_1_text = REPEAT("c", 4000)
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR (4000) , PRIMARY KEY (col_1_varchar(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
ALTER TABLE worklog5743 DROP PRIMARY KEY;
ALTER TABLE worklog5743 ADD PRIMARY KEY (col_1_varchar (900));
ALTER TABLE worklog5743 DROP PRIMARY KEY;
ALTER TABLE worklog5743 ADD PRIMARY KEY (col_1_varchar (3073));
ERROR 42000: Specified key was too long; max key length is 3072 bytes
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_BLOB BLOB (4000) , PRIMARY KEY (col_1_BLOB(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
ALTER TABLE worklog5743 DROP PRIMARY KEY;
ALTER TABLE worklog5743 ADD PRIMARY KEY (col_1_BLOB (500));
ALTER TABLE worklog5743 DROP PRIMARY KEY;
ALTER TABLE worklog5743 ADD PRIMARY KEY (col_1_BLOB (3073));
ERROR 42000: Specified key was too long; max key length is 3072 bytes
DROP TABLE worklog5743;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000)
) ROW_FORMAT=DYNAMIC, engine = innodb;
INSERT INTO worklog5743
VALUES(concat(REPEAT("a", 2000),REPEAT("b", 1000),REPEAT("c", 1000)),
REPEAT("o", 4000));
INSERT INTO worklog5743
VALUES(concat(REPEAT("a", 2000),REPEAT("b", 2000)), REPEAT("o", 4000));
ALTER TABLE worklog5743 ADD PRIMARY KEY `pk_idx` (col_1_varchar(3000));
ERROR 23000: Duplicate entry 'aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa' for key 'PRIMARY'
DROP TABLE worklog5743;
set global innodb_large_prefix=0;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000) ,
PRIMARY KEY (col_1_varchar(3072))
) ROW_FORMAT=DYNAMIC, engine = innodb;
ERROR 42000: Specified key was too long; max key length is 767 bytes
set global innodb_large_prefix=0;
CREATE TABLE worklog5743 (
col_1_varchar VARCHAR (4000) , col_2_varchar VARCHAR (4000) ,
PRIMARY KEY (col_1_varchar(767))
) engine = innodb;
CREATE INDEX prefix_idx ON worklog5743(col_1_varchar (1000));
Warnings:
Warning	1071	Specified key was too long; max key length is 767 bytes
Warning	1071	Specified key was too long; max key length is 767 bytes
DROP TABLE worklog5743;
SET GLOBAL innodb_file_format=Antelope;
SET GLOBAL innodb_file_per_table=0;
SET GLOBAL innodb_large_prefix=0;
