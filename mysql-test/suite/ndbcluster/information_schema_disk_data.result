SET information_schema_stats_expiry=0;
CREATE LOGFILE GROUP lg_1
ADD UNDOFILE 'undofile.dat'
  INITIAL_SIZE 16M
UNDO_BUFFER_SIZE = 1M
ENGINE=NDB;
SELECT id, fq_name FROM ndbinfo.dict_obj_info WHERE type = 21;
id	fq_name
logfilegroup_objectid	lg_1

SELECT id, fq_name FROM ndbinfo.dict_obj_info WHERE type = 23;
id	fq_name
undofile_objectid	undofile.dat

ALTER LOGFILE GROUP lg_1
ADD UNDOFILE 'undofile1.dat'
  INITIAL_SIZE 16M
ENGINE=NDB;
SELECT FILE_NAME, FILE_TYPE, LOGFILE_GROUP_NAME, ENGINE,
TOTAL_EXTENTS, EXTENT_SIZE, INITIAL_SIZE, MAXIMUM_SIZE, EXTRA
FROM INFORMATION_SCHEMA.FILES
WHERE ENGINE='ndbcluster' AND FILE_TYPE='UNDO LOG';
FILE_NAME	./undofile.dat
FILE_TYPE	UNDO LOG
LOGFILE_GROUP_NAME	lg_1
ENGINE	ndbcluster
TOTAL_EXTENTS	4194304
EXTENT_SIZE	4
INITIAL_SIZE	16777216
MAXIMUM_SIZE	16777216
EXTRA	UNDO_BUFFER_SIZE=1048576
FILE_NAME	./undofile1.dat
FILE_TYPE	UNDO LOG
LOGFILE_GROUP_NAME	lg_1
ENGINE	ndbcluster
TOTAL_EXTENTS	4194304
EXTENT_SIZE	4
INITIAL_SIZE	16777216
MAXIMUM_SIZE	16777216
EXTRA	UNDO_BUFFER_SIZE=1048576
CREATE TABLESPACE ts_1
ADD DATAFILE 'datafile.dat'
  USE LOGFILE GROUP lg_1
INITIAL_SIZE 2M
ENGINE NDB;
Check that the datafiles FILE_ID column in INFORMATION_SCHEMA.FILES
is the same as its object id in NDB(as reported by ndbinfo)

ALTER TABLESPACE ts_1
ADD DATAFILE 'datafile2.dat'
  INITIAL_SIZE = 4M;
CREATE TABLE t1 (
a int PRIMARY KEY,
b varchar(255)
) ENGINE = NDB
TABLESPACE ts_1
STORAGE DISK;
INSERT INTO t1 VALUES (1, "We have got Chhetri");
SELECT FILE_NAME, FILE_TYPE, TABLESPACE_NAME,
LOGFILE_GROUP_NAME, ENGINE, FREE_EXTENTS, TOTAL_EXTENTS, EXTENT_SIZE,
INITIAL_SIZE, MAXIMUM_SIZE, ROW_FORMAT
FROM INFORMATION_SCHEMA.FILES
WHERE ENGINE='ndbcluster' AND FILE_TYPE='DATAFILE';
FILE_NAME	./datafile.dat
FILE_TYPE	DATAFILE
TABLESPACE_NAME	ts_1
LOGFILE_GROUP_NAME	lg_1
ENGINE	ndbcluster
FREE_EXTENTS	2
TOTAL_EXTENTS	2
EXTENT_SIZE	1048576
INITIAL_SIZE	2097152
MAXIMUM_SIZE	2097152
ROW_FORMAT	FIXED
FILE_NAME	./datafile2.dat
FILE_TYPE	DATAFILE
TABLESPACE_NAME	ts_1
LOGFILE_GROUP_NAME	lg_1
ENGINE	ndbcluster
FREE_EXTENTS	3
TOTAL_EXTENTS	4
EXTENT_SIZE	1048576
INITIAL_SIZE	4194304
MAXIMUM_SIZE	4194304
ROW_FORMAT	FIXED
DROP TABLE t1;
SELECT FILE_NAME, FREE_EXTENTS, TOTAL_EXTENTS
FROM information_schema.files
WHERE ENGINE='ndbcluster' AND FILE_TYPE='DATAFILE';
FILE_NAME	./datafile.dat
FREE_EXTENTS	2
TOTAL_EXTENTS	2
FILE_NAME	./datafile2.dat
FREE_EXTENTS	4
TOTAL_EXTENTS	4
ALTER TABLESPACE ts_1
DROP DATAFILE 'datafile.dat';
ALTER TABLESPACE ts_1
DROP DATAFILE 'datafile2.dat';
DROP TABLESPACE ts_1;
DROP LOGFILE GROUP lg_1
ENGINE=NDB;
