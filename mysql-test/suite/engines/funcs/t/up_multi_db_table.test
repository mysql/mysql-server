# This line and the line below is a temporary line for tests that do not need MyISAM in future, but need to be kept for tests that need it.
--source include/have_myisam.inc

--disable_warnings
DROP DATABASE IF EXISTS d1;
DROP DATABASE IF EXISTS d2;
DROP DATABASE IF EXISTS d3;
--enable_warnings
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 TINYINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 TINYINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 TINYINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE   d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 SMALLINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 SMALLINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 SMALLINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE   d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 MEDIUMINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 MEDIUMINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 MEDIUMINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE   d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 INT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 INT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 INT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE   d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 INTEGER NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 INTEGER NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 INTEGER NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE   d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 BIGINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 BIGINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 BIGINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE   d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 TINYINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 TINYINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 TINYINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE IGNORE d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 SMALLINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 SMALLINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 SMALLINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE IGNORE d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 MEDIUMINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 MEDIUMINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 MEDIUMINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE IGNORE d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 INT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 INT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 INT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE IGNORE d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 INTEGER NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 INTEGER NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 INTEGER NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE IGNORE d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;
CREATE DATABASE d1;
CREATE DATABASE d2;
CREATE DATABASE d3;
CREATE TABLE d1.t1 (c1 BIGINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d2.t2 (c1 BIGINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
CREATE TABLE d3.t3 (c1 BIGINT NOT NULL PRIMARY KEY, c2 INTEGER, KEY(c2));
INSERT INTO d1.t1 VALUES(1,1),(2,2),(3,3),(4,4),(5,5);
INSERT INTO d2.t2 VALUES(11,1),(12,1),(13,1),(14,2),(15,6);
INSERT INTO d3.t3 VALUES(21,11),(22,11),(23,13),(24,14),(25,15);
UPDATE IGNORE d1.t1, d2.t2, d3.t3 SET d1.t1.c2=30, d2.t2.c2=40, d3.t3.c2=50 WHERE d1.t1.c1=d2.t2.c2 AND d2.t2.c1=d3.t3.c2;
SELECT * FROM d1.t1 ORDER BY c1;
SELECT * FROM d2.t2 ORDER BY c1;
SELECT * FROM d3.t3 ORDER BY c1;
DROP DATABASE d1;
DROP DATABASE d2;
DROP DATABASE d3;

