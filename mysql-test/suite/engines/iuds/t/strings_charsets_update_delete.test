--disable_warnings
--enable_warnings
DROP TABLE IF EXISTS t1,t2,t3,t4,t5,t6,t7,t8,t9,t10,t11,t12,t13,t14,t15,t16,t17,t18;

######## Running UPDATE tests ########

#Test for latin1 character set
CREATE TABLE t5(c1 CHAR(1) CHARACTER SET latin1); 
# Insert some targeted values for latin1 character set; borrowing from ctype_latin.test in the main suite
INSERT INTO t5 VALUES (_latin1 0x00),(_latin1 0x01),(_latin1 0x02),(_latin1 0x03),(_latin1 0x04),(_latin1 0x05),(_latin1 0x06),(_latin1 0x07);
INSERT INTO t5 VALUES (_latin1 0x08),(_latin1 0x09),(_latin1 0x0A),(_latin1 0x0B),(_latin1 0x0C),(_latin1 0x0D),(_latin1 0x0E),(_latin1 0x0F);
INSERT INTO t5 VALUES (_latin1 0x10),(_latin1 0x11),(_latin1 0x12),(_latin1 0x13),(_latin1 0x14),(_latin1 0x15),(_latin1 0x16),(_latin1 0x17);
INSERT INTO t5 VALUES (_latin1 0x18),(_latin1 0x19),(_latin1 0x1A),(_latin1 0x1B),(_latin1 0x1C),(_latin1 0x1D),(_latin1 0x1E),(_latin1 0x1F);
INSERT INTO t5 VALUES (_latin1 0x20),(_latin1 0x21),(_latin1 0x22),(_latin1 0x23),(_latin1 0x24),(_latin1 0x25),(_latin1 0x26),(_latin1 0x27);
INSERT INTO t5 VALUES (_latin1 0x28),(_latin1 0x29),(_latin1 0x2A),(_latin1 0x2B),(_latin1 0x2C),(_latin1 0x2D),(_latin1 0x2E),(_latin1 0x2F);
INSERT INTO t5 VALUES (_latin1 0x30),(_latin1 0x31),(_latin1 0x32),(_latin1 0x33),(_latin1 0x34),(_latin1 0x35),(_latin1 0x36),(_latin1 0x37);
INSERT INTO t5 VALUES (_latin1 0x38),(_latin1 0x39),(_latin1 0x3A),(_latin1 0x3B),(_latin1 0x3C),(_latin1 0x3D),(_latin1 0x3E),(_latin1 0x3F);
INSERT INTO t5 VALUES (_latin1 0x40),(_latin1 0x41),(_latin1 0x42),(_latin1 0x43),(_latin1 0x44),(_latin1 0x45),(_latin1 0x46),(_latin1 0x47);
INSERT INTO t5 VALUES (_latin1 0x48),(_latin1 0x49),(_latin1 0x4A),(_latin1 0x4B),(_latin1 0x4C),(_latin1 0x4D),(_latin1 0x4E),(_latin1 0x4F);
INSERT INTO t5 VALUES (_latin1 0x50),(_latin1 0x51),(_latin1 0x52),(_latin1 0x53),(_latin1 0x54),(_latin1 0x55),(_latin1 0x56),(_latin1 0x57);
INSERT INTO t5 VALUES (_latin1 0x58),(_latin1 0x59),(_latin1 0x5A),(_latin1 0x5B),(_latin1 0x5C),(_latin1 0x5D),(_latin1 0x5E),(_latin1 0x5F);
INSERT INTO t5 VALUES (_latin1 0x60),(_latin1 0x61),(_latin1 0x62),(_latin1 0x63),(_latin1 0x64),(_latin1 0x65),(_latin1 0x66),(_latin1 0x67);
INSERT INTO t5 VALUES (_latin1 0x68),(_latin1 0x69),(_latin1 0x6A),(_latin1 0x6B),(_latin1 0x6C),(_latin1 0x6D),(_latin1 0x6E),(_latin1 0x6F);
INSERT INTO t5 VALUES (_latin1 0x70),(_latin1 0x71),(_latin1 0x72),(_latin1 0x73),(_latin1 0x74),(_latin1 0x75),(_latin1 0x76),(_latin1 0x77);
INSERT INTO t5 VALUES (_latin1 0x78),(_latin1 0x79),(_latin1 0x7A),(_latin1 0x7B),(_latin1 0x7C),(_latin1 0x7D),(_latin1 0x7E),(_latin1 0x7F);
INSERT INTO t5 VALUES (_latin1 0x80),(_latin1 0x81),(_latin1 0x82),(_latin1 0x83),(_latin1 0x84),(_latin1 0x85),(_latin1 0x86),(_latin1 0x87);
INSERT INTO t5 VALUES (_latin1 0x88),(_latin1 0x89),(_latin1 0x8A),(_latin1 0x8B),(_latin1 0x8C),(_latin1 0x8D),(_latin1 0x8E),(_latin1 0x8F);
INSERT INTO t5 VALUES (_latin1 0x90),(_latin1 0x91),(_latin1 0x92),(_latin1 0x93),(_latin1 0x94),(_latin1 0x95),(_latin1 0x96),(_latin1 0x97);
INSERT INTO t5 VALUES (_latin1 0x98),(_latin1 0x99),(_latin1 0x9A),(_latin1 0x9B),(_latin1 0x9C),(_latin1 0x9D),(_latin1 0x9E),(_latin1 0x9F);
INSERT INTO t5 VALUES (_latin1 0xA0),(_latin1 0xA1),(_latin1 0xA2),(_latin1 0xA3),(_latin1 0xA4),(_latin1 0xA5),(_latin1 0xA6),(_latin1 0xA7);
INSERT INTO t5 VALUES (_latin1 0xA8),(_latin1 0xA9),(_latin1 0xAA),(_latin1 0xAB),(_latin1 0xAC),(_latin1 0xAD),(_latin1 0xAE),(_latin1 0xAF);
INSERT INTO t5 VALUES (_latin1 0xB0),(_latin1 0xB1),(_latin1 0xB2),(_latin1 0xB3),(_latin1 0xB4),(_latin1 0xB5),(_latin1 0xB6),(_latin1 0xB7);
INSERT INTO t5 VALUES (_latin1 0xB8),(_latin1 0xB9),(_latin1 0xBA),(_latin1 0xBB),(_latin1 0xBC),(_latin1 0xBD),(_latin1 0xBE),(_latin1 0xBF);
INSERT INTO t5 VALUES (_latin1 0xC0),(_latin1 0xC1),(_latin1 0xC2),(_latin1 0xC3),(_latin1 0xC4),(_latin1 0xC5),(_latin1 0xC6),(_latin1 0xC7);
INSERT INTO t5 VALUES (_latin1 0xC8),(_latin1 0xC9),(_latin1 0xCA),(_latin1 0xCB),(_latin1 0xCC),(_latin1 0xCD),(_latin1 0xCE),(_latin1 0xCF);
INSERT INTO t5 VALUES (_latin1 0xD0),(_latin1 0xD1),(_latin1 0xD2),(_latin1 0xD3),(_latin1 0xD4),(_latin1 0xD5),(_latin1 0xD6),(_latin1 0xD7);
INSERT INTO t5 VALUES (_latin1 0xD8),(_latin1 0xD9),(_latin1 0xDA),(_latin1 0xDB),(_latin1 0xDC),(_latin1 0xDD),(_latin1 0xDE),(_latin1 0xDF);
INSERT INTO t5 VALUES (_latin1 0xE0),(_latin1 0xE1),(_latin1 0xE2),(_latin1 0xE3),(_latin1 0xE4),(_latin1 0xE5),(_latin1 0xE6),(_latin1 0xE7);
INSERT INTO t5 VALUES (_latin1 0xE8),(_latin1 0xE9),(_latin1 0xEA),(_latin1 0xEB),(_latin1 0xEC),(_latin1 0xED),(_latin1 0xEE),(_latin1 0xEF);
INSERT INTO t5 VALUES (_latin1 0xF0),(_latin1 0xF1),(_latin1 0xF2),(_latin1 0xF3),(_latin1 0xF4),(_latin1 0xF5),(_latin1 0xF6),(_latin1 0xF7);
INSERT INTO t5 VALUES (_latin1 0xF8),(_latin1 0xF9),(_latin1 0xFA),(_latin1 0xFB),(_latin1 0xFC),(_latin1 0xFD),(_latin1 0xFE),(_latin1 0xFF);
SELECT hex(c1) FROM t5;
CREATE TABLE t6 (a char(1) character set latin2);
INSERT INTO t6 VALUES (_latin2 0x20),(_latin2 0x21),(_latin2 0x22),(_latin2 0x23),(_latin2 0x24),(_latin2 0x25),(_latin2 0x26),(_latin2 0x27);
INSERT INTO t6 VALUES (_latin2 0x28),(_latin2 0x29),(_latin2 0x2A),(_latin2 0x2B),(_latin2 0x2C),(_latin2 0x2D),(_latin2 0x2E),(_latin2 0x2F);
INSERT INTO t6 VALUES (_latin2 0x30),(_latin2 0x31),(_latin2 0x32),(_latin2 0x33),(_latin2 0x34),(_latin2 0x35),(_latin2 0x36),(_latin2 0x37);
INSERT INTO t6 VALUES (_latin2 0x38),(_latin2 0x39),(_latin2 0x3A),(_latin2 0x3B),(_latin2 0x3C),(_latin2 0x3D),(_latin2 0x3E),(_latin2 0x3F);
INSERT INTO t6 VALUES (_latin2 0x40),(_latin2 0x41),(_latin2 0x42),(_latin2 0x43),(_latin2 0x44),(_latin2 0x45),(_latin2 0x46),(_latin2 0x47);
INSERT INTO t6 VALUES (_latin2 0x48),(_latin2 0x49),(_latin2 0x4A),(_latin2 0x4B),(_latin2 0x4C),(_latin2 0x4D),(_latin2 0x4E),(_latin2 0x4F);
INSERT INTO t6 VALUES (_latin2 0x50),(_latin2 0x51),(_latin2 0x52),(_latin2 0x53),(_latin2 0x54),(_latin2 0x55),(_latin2 0x56),(_latin2 0x57);
INSERT INTO t6 VALUES (_latin2 0x58),(_latin2 0x59),(_latin2 0x5A),(_latin2 0x5B),(_latin2 0x5C),(_latin2 0x5D),(_latin2 0x5E),(_latin2 0x5F);
INSERT INTO t6 VALUES (_latin2 0x60),(_latin2 0x61),(_latin2 0x62),(_latin2 0x63),(_latin2 0x64),(_latin2 0x65),(_latin2 0x66),(_latin2 0x67);
INSERT INTO t6 VALUES (_latin2 0x68),(_latin2 0x69),(_latin2 0x6A),(_latin2 0x6B),(_latin2 0x6C),(_latin2 0x6D),(_latin2 0x6E),(_latin2 0x6F);
INSERT INTO t6 VALUES (_latin2 0x70),(_latin2 0x71),(_latin2 0x72),(_latin2 0x73),(_latin2 0x74),(_latin2 0x75),(_latin2 0x76),(_latin2 0x77);
INSERT INTO t6 VALUES (_latin2 0x78),(_latin2 0x79),(_latin2 0x7A),(_latin2 0x7B),(_latin2 0x7C),(_latin2 0x7D),(_latin2 0x7E),(_latin2 0x7F);
INSERT INTO t6 VALUES (_latin2 0x80),(_latin2 0x81),(_latin2 0x82),(_latin2 0x83),(_latin2 0x84),(_latin2 0x85),(_latin2 0x86),(_latin2 0x87);
INSERT INTO t6 VALUES (_latin2 0x88),(_latin2 0x89),(_latin2 0x8A),(_latin2 0x8B),(_latin2 0x8C),(_latin2 0x8D),(_latin2 0x8E),(_latin2 0x8F);
INSERT INTO t6 VALUES (_latin2 0x90),(_latin2 0x91),(_latin2 0x92),(_latin2 0x93),(_latin2 0x94),(_latin2 0x95),(_latin2 0x96),(_latin2 0x97);
INSERT INTO t6 VALUES (_latin2 0x98),(_latin2 0x99),(_latin2 0x9A),(_latin2 0x9B),(_latin2 0x9C),(_latin2 0x9D),(_latin2 0x9E),(_latin2 0x9F);
INSERT INTO t6 VALUES (_latin2 0xA0),(_latin2 0xA1),(_latin2 0xA2),(_latin2 0xA3),(_latin2 0xA4),(_latin2 0xA5),(_latin2 0xA6),(_latin2 0xA7);
INSERT INTO t6 VALUES (_latin2 0xA8),(_latin2 0xA9),(_latin2 0xAA),(_latin2 0xAB),(_latin2 0xAC),(_latin2 0xAD),(_latin2 0xAE),(_latin2 0xAF);
INSERT INTO t6 VALUES (_latin2 0xB0),(_latin2 0xB1),(_latin2 0xB2),(_latin2 0xB3),(_latin2 0xB4),(_latin2 0xB5),(_latin2 0xB6),(_latin2 0xB7);
INSERT INTO t6 VALUES (_latin2 0xB8),(_latin2 0xB9),(_latin2 0xBA),(_latin2 0xBB),(_latin2 0xBC),(_latin2 0xBD),(_latin2 0xBE),(_latin2 0xBF);
INSERT INTO t6 VALUES (_latin2 0xC0),(_latin2 0xC1),(_latin2 0xC2),(_latin2 0xC3),(_latin2 0xC4),(_latin2 0xC5),(_latin2 0xC6),(_latin2 0xC7);
INSERT INTO t6 VALUES (_latin2 0xC8),(_latin2 0xC9),(_latin2 0xCA),(_latin2 0xCB),(_latin2 0xCC),(_latin2 0xCD),(_latin2 0xCE),(_latin2 0xCF);
INSERT INTO t6 VALUES (_latin2 0xD0),(_latin2 0xD1),(_latin2 0xD2),(_latin2 0xD3),(_latin2 0xD4),(_latin2 0xD5),(_latin2 0xD6),(_latin2 0xD7);
INSERT INTO t6 VALUES (_latin2 0xD8),(_latin2 0xD9),(_latin2 0xDA),(_latin2 0xDB),(_latin2 0xDC),(_latin2 0xDD),(_latin2 0xDE),(_latin2 0xDF);
INSERT INTO t6 VALUES (_latin2 0xE0),(_latin2 0xE1),(_latin2 0xE2),(_latin2 0xE3),(_latin2 0xE4),(_latin2 0xE5),(_latin2 0xE6),(_latin2 0xE7);
INSERT INTO t6 VALUES (_latin2 0xE8),(_latin2 0xE9),(_latin2 0xEA),(_latin2 0xEB),(_latin2 0xEC),(_latin2 0xED),(_latin2 0xEE),(_latin2 0xEF);
INSERT INTO t6 VALUES (_latin2 0xF0),(_latin2 0xF1),(_latin2 0xF2),(_latin2 0xF3),(_latin2 0xF4),(_latin2 0xF5),(_latin2 0xF6),(_latin2 0xF7);
INSERT INTO t6 VALUES (_latin2 0xF8),(_latin2 0xF9),(_latin2 0xFA),(_latin2 0xFB),(_latin2 0xFC),(_latin2 0xFD),(_latin2 0xFE),(_latin2 0xFF);
SELECT hex(c1) FROM t5; 
#Table to test for ascii character set 
select 'e'='`';
select 'y'='~';
CREATE TABLE t7(a CHAR(1) CHARACTER SET ascii);
# Insert some targeted values for ascii character set; borrowing from ctype_ascii.test in the main suite
 insert into t7 (a) values (' '), ('a'), ('b'), ('c'), ('d'), ('e'), ('f'), ('g'), ('h'), ('i'), ('j'), ('k'), ('l'), ('m'), ('n'), ('o'), ('p'), ('q'), ('r'), ('s'), ('t'), ('u'), ('v'), ('w'), ('x'), ('y'), ('z'), ('A'), ('B'), ('C'), ('D'), ('E'), ('F'), ('G'), ('H'), ('I'), ('J'), ('K'), ('L'), ('M'), ('N'), ('O'), ('P'), ('Q'), ('R'), ('S'), ('T'), ('U'), ('V'), ('W'), ('X'), ('Y'), ('Z'), ('!'), ('@'), ('#'), ('$'), ('%'), ('^'), ('&'), ('*'), ('('), (')'), ('_'), ('+'), ('`'), ('~'), ('1'), ('2'), ('3'), ('4'), ('5'), ('6'), ('7'), ('8'), ('9'), ('0'), ('['), (']'), ('\\'), ('|'), ('}'), ('{'), ('"'), (':'), (''''), (';'), ('/'), ('.'), (','), ('?'), ('>'), ('<'), ('\n'), ('\t'), ('\a'), ('\f'), ('\v'); 
SELECT t7a.a, t7b.a FROM t7 as t7a, t7 as t7b WHERE t7a.a=t7b.a ORDER BY BINARY t7a.a, BINARY t7b.a; 
 UPDATE t7 SET a=CHAR(ASCII(a)+32) WHERE ASCII(a) >= 65 AND ASCII(a) <= 90;
 UPDATE t7 SET a=CHAR(ASCII(a)-32) WHERE ASCII(a) >= 97 AND ASCII(a) <= 122;
SELECT a,HEX(a) FROM t7;  
#Tests for utf8 character set 
CREATE TABLE t8 (a char(10) character set utf8 not null);
INSERT INTO t8 VALUES ('a'),('a\0'),('a\t'),('a ');
SELECT hex(a),STRCMP(a,'a'), STRCMP(a,'a ') FROM t8;
DROP TABLE t8;
CREATE TABLE t8(a VARCHAR(255), KEY(a)) DEFAULT CHARSET=utf8;
eval INSERT INTO t8 VALUES('uUABCDEFGHIGKLMNOPRSTUVWXYZbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb');
INSERT INTO t8 VALUES('uu');
check table t8;
INSERT INTO t8 VALUES('uU');
check table t8;
INSERT INTO t8 VALUES('uu');
check table t8;
INSERT INTO t8 VALUES('uuABC');
check table t8;
INSERT INTO t8 VALUES('UuABC');
check table t8;
INSERT INTO t8 VALUES('uuABC');
check table t8;
alter table t8 add b int;
INSERT INTO t8 VALUES('BCDEFGHIGKLMNOPRSTUVWXYZbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb',1);
INSERT INTO t8 VALUES('uuABCDEFGHIGKLMNOPRSTUVWXYZbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb',2);
delete from t8 where b=1;
INSERT INTO t8 VALUES('UUABCDEFGHIGKLMNOPRSTUVWXYZbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb',1);
check table t8;
INSERT INTO t8 VALUES('uuABCDEFGHIGKLMNOPRSTUVWXYZbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb',3);
INSERT INTO t8 VALUES('uuABCDEFGHIGKLMNOPRSTUVWXYZbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb',4);
delete from t8 where b=3;
INSERT INTO t8 VALUES('uUABCDEFGHIGKLMNOPRSTUVWXYZbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb',3);
check table t8;
UPDATE t8 SET a=REPEAT('Z',255) WHERE a LIKE 'uu%';
SELECT a,LENGTH(a) FROM t8;
drop table t8;                                  
SET collation_connection = 'utf8_general_ci';
--character_set utf8mb4
CREATE TABLE t8 (c1 TEXT character set utf8 collate utf8_general_ci);
insert into t8 values (repeat('बांग्लादे',1200));
insert into t8 values ('রবীন্দ্রনাথ ঠাকুর'); 
insert into t8 values (LOAD_FILE('$MYSQLTEST_VARDIR/hindi.txt'));
ALTER TABLE t8 ADD c2 TEXT CHARACTER SET utf8 collate utf8_general_ci DEFAULT NULL; 
INSERT INTO t8 values (repeat('রবীন্দ্রনাথ ঠাকুর',1300),'');
ALTER TABLE t8 ADD INDEX(c1(18)); 
UPDATE t8 SET c2='यह हिन्दी में एक अलग वाक्य है. यह एक अलग कॉलम में जोड़ा जा रहा है' WHERE c2=NULL;
SELECT length(c1),c1, length(c2),c2 FROM t8; 
SELECT length(c1),c1, length(c2),c2 FROM t8 WHERE c1 LIKE _utf8 'রবীন%' COLLATE utf8_general_ci ; 
ALTER TABLE t8 ADD INDEX(c1(18),c2(10));
SELECT length(c1),c1, length(c2),c2 FROM t8 WHERE c1  LIKE _utf8 'রবীন%' COLLATE utf8_general_ci OR c2 LIKE _utf8 'जग' COLLATE utf8_general_ci;
UPDATE t8 SET c1= REPEAT('৯',12000);
SELECT length(c1),length(c2) FROM t8;
DROP TABLE t8;
SET collation_connection = default;
DROP TABLE IF EXISTS t1,t2,t3,t4,t5,t6,t7,t8,t9,t10,t11,t12,t13,t14,t15,t16,t17,t18;
