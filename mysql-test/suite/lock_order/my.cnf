# Based on my.cnf from the group_replication test suite.

# Use default setting for mysqld processes
!include include/default_mysqld.cnf
!include include/default_client.cnf

[mysqld]
log-bin=                    server-binary-log
relay-log=                  server-relay-log

binlog-checksum=            NONE
enforce-gtid-consistency
gtid-mode=                  on

report-host=                127.0.0.1
report-user=                root

master-retry-count=         10
skip-replica-start

loose-group_replication_start_on_boot= OFF
loose-group_replication_single_primary_mode= FALSE
loose-group_replication_enforce_update_everywhere_checks= TRUE
loose-group_replication_recovery_get_public_key= TRUE

# Directory where slaves find the dumps generated by "load data"
# on the server. The path need to have constant length otherwise
# test results will vary, thus a relative path is used.
replica-load-tmpdir=          ../../tmp

loose-innodb_write_io_threads= 1
loose-innodb_read_io_threads=  1

[mysqld.1]
# Run the master.sh script before starting this process
#!run-master-sh

report-port=                @mysqld.1.port

[mysqld.2]
# Run the slave.sh script before starting this process
#!run-slave-sh

# Append <testname>-slave.opt file to the list of argument used when
# starting the mysqld
#!use-slave-opt

report-port=                @mysqld.2.port

[ENV]
MASTER_MYPORT=              @mysqld.1.port
MASTER_MYSOCK=              @mysqld.1.socket

SLAVE_MYPORT=               @mysqld.2.port
SLAVE_MYSOCK=               @mysqld.2.socket

