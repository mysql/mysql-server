call mtr.add_suppression("unknown variable 'loose_mecab_rc_file");
call mtr.add_suppression("Fulltext index charset 'big5' doesn't match mecab charset");
call mtr.add_suppression("Mecab: createModel.* failed: param.cpp");
call mtr.add_suppression("Plugin 'mecab' init function returned error");
SHOW STATUS LIKE 'mecab_charset';
Variable_name	Value
mecab_charset	utf8
SET NAMES utf8;
Warnings:
Warning	3719	'utf8' is currently an alias for the character set UTF8MB3, which will be replaced by UTF8MB4 in a future release. Please consider using UTF8MB4 in order to be unambiguous.
CREATE TABLE page (
page_id int(8) unsigned NOT NULL AUTO_INCREMENT,
page_title varchar(255) CHARACTER SET utf8 NOT NULL DEFAULT '',
PRIMARY KEY (page_id),
FULLTEXT KEY page_title (page_title) WITH PARSER mecab
) ENGINE=InnoDB;
Warnings:
Warning	3719	'utf8' is currently an alias for the character set UTF8MB3, which will be replaced by UTF8MB4 in a future release. Please consider using UTF8MB4 in order to be unambiguous.
INSERT INTO page VALUES
(1,'ï¾šï¾“ï¾…'),
(2,'SDãƒ¬ãƒ¢ãƒŠ'),
(3,'ãƒ¬ãƒ¢ãƒŠ'),
(4,'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ '),
(5,'ã‚­ãƒ '),
(6,'é‰„é“100é›»è»Š'),
(7,'100'),
(8,'ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§'),
(9,'ãƒ„ãƒ«ç§‘_(Sibley)'),
(10,'ãƒ„ãƒ«'),
(11,'é‰„é“');
SET GLOBAL innodb_ft_aux_table="test/page";
SELECT * FROM INFORMATION_SCHEMA.INNODB_FT_INDEX_CACHE;
WORD	FIRST_DOC_ID	LAST_DOC_ID	DOC_COUNT	DOC_ID	POSITION
100	7	8	2	7	6
100	7	8	2	8	0
sd	3	3	1	3	0
sibley	10	10	1	10	11
_(	10	10	1	10	9
ã‚­ãƒ 	6	6	1	6	0
ã‚·ã‚¹ãƒ†ãƒ 	5	5	1	5	24
ãƒ„ãƒ«	10	11	2	10	0
ãƒ„ãƒ«	10	11	2	11	0
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹	5	5	1	5	0
ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§	9	9	1	9	0
ãƒ¬ãƒ¢ãƒŠ	3	4	2	3	2
ãƒ¬ãƒ¢ãƒŠ	3	4	2	4	0
ç®¡ç†	5	5	1	5	18
é‰„é“	7	12	2	7	0
é‰„é“	7	12	2	12	0
é›»è»Š	7	7	1	7	9
ï¾šï¾“ï¾…	2	2	1	2	0
SELECT * FROM INFORMATION_SCHEMA.INNODB_FT_INDEX_TABLE;
WORD	FIRST_DOC_ID	LAST_DOC_ID	DOC_COUNT	DOC_ID	POSITION
SHOW CREATE TABLE page;
Table	Create Table
page	CREATE TABLE `page` (
  `page_id` int(8) unsigned NOT NULL AUTO_INCREMENT,
  `page_title` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`page_id`),
  FULLTEXT KEY `page_title` (`page_title`) /*!50100 WITH PARSER `mecab` */ 
) ENGINE=InnoDB AUTO_INCREMENT=12 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
SELECT * FROM page WHERE MATCH(page_title) AGAINST("ï¾šï¾“ï¾…" IN BOOLEAN MODE);
page_id	page_title
1	ï¾šï¾“ï¾…
SELECT * FROM page WHERE MATCH(page_title) AGAINST("ã‚­ãƒ ã‚·ãƒ§ã‚¦ã‚«ãƒ³" IN BOOLEAN MODE);
page_id	page_title
SELECT * FROM page WHERE MATCH(page_title) AGAINST("100" IN BOOLEAN MODE);
page_id	page_title
6	é‰„é“100é›»è»Š
7	100
SELECT * FROM page WHERE MATCH(page_title) AGAINST("ãƒ„ãƒ«*" IN BOOLEAN MODE);
page_id	page_title
9	ãƒ„ãƒ«ç§‘_(Sibley)
10	ãƒ„ãƒ«
SELECT * FROM page WHERE MATCH(page_title) AGAINST("ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§");
page_id	page_title
8	ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§
SELECT * FROM page WHERE MATCH(page_title) AGAINST("ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§" IN BOOLEAN MODE);
page_id	page_title
SELECT * FROM page WHERE MATCH(page_title) AGAINST("+ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§ +ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹" IN BOOLEAN MODE);
page_id	page_title
SELECT * FROM page WHERE MATCH(page_title) AGAINST("+ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§ +(ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)" IN BOOLEAN MODE);
page_id	page_title
SELECT * FROM page WHERE MATCH(page_title) AGAINST("-ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§ +(ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)" IN BOOLEAN MODE);
page_id	page_title
4	ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
SELECT * FROM page WHERE MATCH(page_title) AGAINST("ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§ é‰„é“" IN BOOLEAN MODE);
page_id	page_title
6	é‰„é“100é›»è»Š
11	é‰„é“
SELECT * FROM page WHERE MATCH(page_title) AGAINST("<ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§ >é‰„é“" IN BOOLEAN MODE);
page_id	page_title
6	é‰„é“100é›»è»Š
11	é‰„é“
SELECT * FROM page WHERE MATCH(page_title) AGAINST('é‰„é“');
page_id	page_title
6	é‰„é“100é›»è»Š
11	é‰„é“
SELECT * FROM page WHERE MATCH(page_title) AGAINST('é‰„é“' WITH QUERY EXPANSION);
page_id	page_title
6	é‰„é“100é›»è»Š
7	100
11	é‰„é“
ALTER TABLE page add column c1 varchar(100) CHARACTER SET utf8 DEFAULT 'ï¾šï¾“ï¾…';
Warnings:
Warning	3719	'utf8' is currently an alias for the character set UTF8MB3, which will be replaced by UTF8MB4 in a future release. Please consider using UTF8MB4 in order to be unambiguous.
ALTER TABLE page ADD FULLTEXT INDEX idx1 (page_title,c1) WITH PARSER mecab;
SELECT * FROM page WHERE MATCH(page_title,c1) AGAINST('ï¾šï¾“ï¾…');
page_id	page_title	c1
1	ï¾šï¾“ï¾…	ï¾šï¾“ï¾…
2	SDãƒ¬ãƒ¢ãƒŠ	ï¾šï¾“ï¾…
3	ãƒ¬ãƒ¢ãƒŠ	ï¾šï¾“ï¾…
4	ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 	ï¾šï¾“ï¾…
5	ã‚­ãƒ 	ï¾šï¾“ï¾…
6	é‰„é“100é›»è»Š	ï¾šï¾“ï¾…
7	100	ï¾šï¾“ï¾…
8	ãƒ©ãƒ•ã‚£ã‚¿ãƒ»ã‚«ã‚¹ãƒ†ã‚£ãƒ¼ã‚¸ãƒ§	ï¾šï¾“ï¾…
9	ãƒ„ãƒ«ç§‘_(Sibley)	ï¾šï¾“ï¾…
10	ãƒ„ãƒ«	ï¾šï¾“ï¾…
11	é‰„é“	ï¾šï¾“ï¾…
SELECT * FROM page WHERE MATCH(page_title,c1) AGAINST('-ï¾šï¾“ï¾…' IN BOOLEAN MODE);
page_id	page_title	c1
DROP TABLE page;
CREATE TABLE page (
page_id int(8) unsigned NOT NULL AUTO_INCREMENT,
page_title varchar(255) CHARACTER SET big5 NOT NULL DEFAULT '',
PRIMARY KEY (page_id)
)ENGINE=InnoDB;
INSERT INTO page VALUES (1,'æ—¥æœ¬');
CREATE FULLTEXT INDEX ft_idx ON page(page_title) WITH PARSER mecab;
Warnings:
Warning	124	InnoDB rebuilding table to add column FTS_DOC_ID
SELECT * FROM INFORMATION_SCHEMA.INNODB_FT_INDEX_CACHE;
WORD	FIRST_DOC_ID	LAST_DOC_ID	DOC_COUNT	DOC_ID	POSITION
SELECT * FROM INFORMATION_SCHEMA.INNODB_FT_INDEX_TABLE;
WORD	FIRST_DOC_ID	LAST_DOC_ID	DOC_COUNT	DOC_ID	POSITION
INSERT INTO page VALUES (2,'æ—¥æœ¬');
ERROR HY000: Fulltext index charset 'big5' doesn't match mecab charset 'utf8'.
SELECT * FROM page WHERE MATCH(page_title) AGAINST('æ—¥æœ¬');
ERROR HY000: Fulltext index charset 'big5' doesn't match mecab charset 'utf8'.
DROP TABLE page;
SET NAMES utf8mb4;
CREATE TABLE page (
page_id int(8) unsigned NOT NULL AUTO_INCREMENT,
page_title varchar(255) CHARACTER SET utf8mb4 NOT NULL DEFAULT '',
PRIMARY KEY (page_id),
FULLTEXT KEY page_title (page_title) WITH PARSER mecab
) ENGINE=InnoDB;
INSERT INTO page VALUES
(1,'ğŸ˜ƒï¾šï¾“ï¾…'),
(2,'é‰„é“ğŸ˜„'),
(3,'é‰„é“ğŸ˜Š100é›»è»Š');
SET GLOBAL innodb_ft_aux_table="test/page";
SELECT * FROM INFORMATION_SCHEMA.INNODB_FT_INDEX_CACHE;
WORD	FIRST_DOC_ID	LAST_DOC_ID	DOC_COUNT	DOC_ID	POSITION
100	4	4	1	4	10
ï¾šï¾“ï¾…	2	2	1	2	4
é‰„é“	3	4	2	3	0
é‰„é“	3	4	2	4	0
é›»è»Š	4	4	1	4	13
SELECT * FROM INFORMATION_SCHEMA.INNODB_FT_INDEX_TABLE;
WORD	FIRST_DOC_ID	LAST_DOC_ID	DOC_COUNT	DOC_ID	POSITION
SHOW CREATE TABLE page;
Table	Create Table
page	CREATE TABLE `page` (
  `page_id` int(8) unsigned NOT NULL AUTO_INCREMENT,
  `page_title` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`page_id`),
  FULLTEXT KEY `page_title` (`page_title`) /*!50100 WITH PARSER `mecab` */ 
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci
SELECT * FROM page WHERE MATCH(page_title) AGAINST("ï¾šï¾“ï¾…" IN BOOLEAN MODE);
page_id	page_title
1	ğŸ˜ƒï¾šï¾“ï¾…
SELECT * FROM page WHERE MATCH(page_title) AGAINST('é‰„é“');
page_id	page_title
2	é‰„é“ğŸ˜„
3	é‰„é“ğŸ˜Š100é›»è»Š
SELECT * FROM page WHERE MATCH(page_title) AGAINST('é‰„é“ğŸ˜„');
page_id	page_title
2	é‰„é“ğŸ˜„
3	é‰„é“ğŸ˜Š100é›»è»Š
SELECT * FROM page WHERE MATCH(page_title) AGAINST('é‰„é“' WITH QUERY EXPANSION);
page_id	page_title
3	é‰„é“ğŸ˜Š100é›»è»Š
2	é‰„é“ğŸ˜„
DROP TABLE page;
SET GLOBAL innodb_ft_aux_table=default;
UNINSTALL PLUGIN mecab;
