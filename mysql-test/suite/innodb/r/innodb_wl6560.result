set @global_innodb_file_per_table_orig = @@global.innodb_file_per_table;
set global innodb_file_per_table = off;
auto.cnf
ib_logfile0
ib_logfile1
ibdata1
ibtmp1
mtr
mysql
performance_schema
test
drop table if exists t1;
select @@global.innodb_file_per_table;
@@global.innodb_file_per_table
0
create temporary table t1 (i int, f float, c char(100)) engine=innodb;
insert into t1 values (100, 1.1, 'pune');
insert into t1 values (99, 1.2, 'mumbai');
insert into t1 values (98, 1.3, 'jaipur');
insert into t1 values (97, 1.4, 'delhi');
insert into t1 values (96, 1.5, 'ahmedabad');
select * from t1;
i	f	c
100	1.1	pune
99	1.2	mumbai
98	1.3	jaipur
97	1.4	delhi
96	1.5	ahmedabad
explain select * from t1 where f > 1.29999;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	5	Using where
alter table t1 add index sec_index(f);
explain select * from t1 where f > 1.29999;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	sec_index	NULL	NULL	NULL	5	Using where
select * from t1 where f > 1.29999;
i	f	c
98	1.3	jaipur
97	1.4	delhi
96	1.5	ahmedabad
explain select * from t1 where i = 100;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	ALL	NULL	NULL	NULL	NULL	5	Using where
alter table t1 add unique index pri_index(i);
explain select * from t1 where i = 100;
id	select_type	table	type	possible_keys	key	key_len	ref	rows	Extra
1	SIMPLE	t1	const	pri_index	pri_index	5	const	1	NULL
select * from t1 where i = 100;
i	f	c
100	1.1	pune
delete from t1 where i < 97;
insert into t1 values (96, 1.5, 'kolkata');
select * from t1;
i	f	c
100	1.1	pune
99	1.2	mumbai
98	1.3	jaipur
97	1.4	delhi
96	1.5	kolkata
update t1 set f = 1.44 where c = 'delhi';
select * from t1;
i	f	c
100	1.1	pune
99	1.2	mumbai
98	1.3	jaipur
97	1.44	delhi
96	1.5	kolkata
truncate table t1;
insert into t1 values (100, 1.1, 'pune');
insert into t1 values (99, 1.2, 'mumbai');
insert into t1 values (98, 1.3, 'jaipur');
insert into t1 values (97, 1.4, 'delhi');
insert into t1 values (96, 1.5, 'ahmedabad');
select * from t1;
i	f	c
100	1.1	pune
99	1.2	mumbai
98	1.3	jaipur
97	1.4	delhi
96	1.5	ahmedabad
alter table t1 import tablespace;
ERROR HY000: Table 't1' in system tablespace
drop table t1;
create temporary table t1 (keyc int, c char(100), primary key(keyc))
engine=innodb;
CREATE PROCEDURE populate_t1()
BEGIN
DECLARE i INT DEFAULT 1;
while (i <= 10000) DO
insert into t1 values (i, 'a');
SET i = i + 1;
END WHILE;
END|
set autocommit=0;
select count(*) from t1;
count(*)
0
CALL populate_t1();
select count(*) from t1;
count(*)
10000
select * from t1 limit 10;
keyc	c
1	a
2	a
3	a
4	a
5	a
6	a
7	a
8	a
9	a
10	a
set autocommit=1;
truncate table t1;
select count(*) from t1;
count(*)
0
drop procedure populate_t1;
drop table t1;
SET global innodb_file_per_table = @global_innodb_file_per_table_orig;
