CREATE TABLE t1 (
c1 INT AUTO_INCREMENT,
c2 GEOMETRY NOT NULL SRID 0,
PRIMARY KEY(c1),
SPATIAL INDEX(c2)
) ENGINE=INNODB;
INSERT INTO t1(c2) VALUES(Point(1,1));
INSERT INTO t1(c2) VALUES(Point(2,2));
INSERT INTO t1(c2) VALUES(Point(3,3));
INSERT INTO t1(c2) VALUES(Point(4,4));
INSERT INTO t1(c2) VALUES(Point(5,5));
INSERT INTO t1(c2) VALUES(Point(6,6));
INSERT INTO t1(c2) VALUES(Point(7,7));
INSERT INTO t1(c2) VALUES(Point(8,8));
INSERT INTO t1(c2) VALUES(Point(9,9));
INSERT INTO t1(c2) SELECT c2 FROM t1;
INSERT INTO t1(c2) SELECT c2 FROM t1;
INSERT INTO t1(c2) SELECT c2 FROM t1;
INSERT INTO t1(c2) SELECT c2 FROM t1;
INSERT INTO t1(c2) SELECT c2 FROM t1;
INSERT INTO t1(c2) SELECT c2 FROM t1;
INSERT INTO t1(c2) SELECT c2 FROM t1;
INSERT INTO t1(c2) SELECT c2 FROM t1;
INSERT INTO t1(c2) SELECT c2 FROM t1;
SELECT COUNT(*) FROM t1;
COUNT(*)
4608
SELECT @@innodb_sort_buffer_size;
@@innodb_sort_buffer_size
65536
SET SESSION debug="+d,row_merge_instrument_log_check_flush";
ALTER TABLE t1 ADD COLUMN c3 INT;
DROP TABLE t1;
