# Initialize new data directory...
# Restart MySQL using the new data directory...
# restart: --datadir=tmp/log_crash --log-error=my_restart.err
# Prepare schema used in the tests.
# Ensure there is a lot of free space in the redo log.
SET GLOBAL innodb_log_checkpoint_now = ON;
# Disable checkpointing.
SET GLOBAL innodb_checkpoint_disabled = ON;
# Create connection which generates spam to the redo log.
CALL log_spammer();
# Create at least few redo records...
CREATE TABLE t (a INT) ENGINE=InnoDB;
INSERT INTO t(a) VALUES(42);
# Kill MySQL...
# Kill the server
# Start MySQL...
# Verify...
Pattern "Database was not shutdown normally" found
Pattern "Starting crash recovery" found
Pattern "Applying a batch of.*redo log records" found
Pattern "Apply batch completed" found
Pattern "innodb-unknown-compound-v" found
# Remove the data directory...
############################################################################################
# Cleanup...
# Start MySQL...
# restart:
