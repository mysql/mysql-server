CREATE TABLESPACE ts1 ADD DATAFILE 'data1.ibd';
CREATE TABLESPACE ts2 ADD DATAFILE 'data2.ibd';
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_1';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_2';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_3';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_4';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_5';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_1';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_2';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_3';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_4';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_5';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_1';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_2';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_3';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_4';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_5';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_before_post_ddl';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
SET SESSION DEBUG = '-d,ddl_log_before_post_ddl';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_1';
ALTER TABLE t1 ADD PARTITION (PARTITION p2 VALUES LESS THAN(30) TABLESPACE = innodb_file_per_table, PARTITION p3 VALUES LESS THAN(40) TABLESPACE = ts1);
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_1';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_2';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_3';
ALTER TABLE t1 DROP PARTITION p1, p3;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_1';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_2';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_3';
ALTER TABLE t1 DROP PARTITION p1, p3;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_1';
ALTER TABLE t1 DROP PARTITION p1, p3;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_1';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_2';
ALTER TABLE t1 DROP PARTITION p1, p3;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_1';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_2';
ALTER TABLE t1 DROP PARTITION p1, p3;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_delete_1';
ALTER TABLE t1 DROP PARTITION p1, p3;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_before_post_ddl';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_before_post_ddl';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_1';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_2';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_3';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_4';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_5';
ALTER TABLE t1 DROP PARTITION p1, p3;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_6';
ALTER TABLE t1 DROP PARTITION p1, p3;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_6';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_1';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_2';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_3';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_4';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_5';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_1';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_2';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_3';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_4';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_5';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_1';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_2';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_3';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_1';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_2';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_1';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_2';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_delete_1';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_1';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_2';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_1';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_2';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_1';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_2';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_before_post_ddl';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_before_post_ddl';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_1';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_2';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_3';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_4';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_5';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB TABLESPACE ts2
PARTITION BY RANGE(a) PARTITIONS 4
( PARTITION p0 VALUES LESS THAN (10) TABLESPACE ts1,
PARTITION p1 VALUES LESS THAN (20) TABLESPACE innodb_file_per_table,
PARTITION p2 VALUES LESS THAN (30) TABLESPACE innodb_file_per_table,
PARTITION p3 VALUES LESS THAN (40) TABLESPACE innodb_system);
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_6';
ALTER TABLE t1 REORGANIZE PARTITION p2, p3 INTO(PARTITION p2 VALUES LESS THAN(40));
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_6';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_1';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_2';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_3';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_4';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_5';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_6';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_6';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_7';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_7';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_8';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_8';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_9';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_9';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_1';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_2';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_3';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_4';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_5';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_6';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_6';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_7';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_7';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_8';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_8';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_9';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_9';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_1';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_2';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_3';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_4';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_5';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_6';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_6';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_7';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_7';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_8';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_8';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_9';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_9';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_1';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_2';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_3';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_4';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_5';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_6';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_6';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_7';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_7';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_1';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_2';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_3';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_4';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_5';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_6';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_6';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_7';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_7';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_delete_1';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_delete_2';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_delete_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_delete_3';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_delete_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_delete_4';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_delete_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_delete_5';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_delete_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_1';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_2';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_3';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_4';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_5';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_1';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_2';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_3';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_4';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_5';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_1';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_2';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_3';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_4';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_5';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_before_post_ddl';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_before_post_ddl';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_1';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_2';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_3';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_4';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_5';
ALTER TABLE t1 ADD PARTITION PARTITIONS 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_1';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_2';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_3';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_4';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_free_tree_log_5';
ALTER TABLE t1 COALESCE PARTITION 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_free_tree_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_1';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_2';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_3';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_4';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_log_5';
ALTER TABLE t1 COALESCE PARTITION 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_1';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_2';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_3';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_4';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_free_tree_delete_5';
ALTER TABLE t1 COALESCE PARTITION 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_free_tree_delete_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_1';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_2';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_3';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_4';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_5';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_6';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_6';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_delete_space_log_7';
ALTER TABLE t1 COALESCE PARTITION 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_delete_space_log_7';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_1';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_2';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_3';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_4';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_5';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_6';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_6';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_log_7';
ALTER TABLE t1 COALESCE PARTITION 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_log_7';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_delete_1';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_delete_2';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_delete_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_delete_space_delete_3';
ALTER TABLE t1 COALESCE PARTITION 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_delete_space_delete_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_1';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_2';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_3';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_4';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_5';
ALTER TABLE t1 COALESCE PARTITION 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_1';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_2';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_3';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_4';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_5';
ALTER TABLE t1 COALESCE PARTITION 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_1';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_2';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_3';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_4';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_5';
ALTER TABLE t1 COALESCE PARTITION 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_before_post_ddl';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_before_post_ddl';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_1';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_2';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_3';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_4';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_5';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_5';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_6';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_6';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_7';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_7';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_8';
ALTER TABLE t1 COALESCE PARTITION 2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_8';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) PARTITION BY HASH(a) PARTITIONS 4;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_9';
ALTER TABLE t1 COALESCE PARTITION 2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_9';
DROP TABLE t1;
CREATE TABLE t2 (a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c));
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_1';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_2';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_3';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_before_rename_space_log_4';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_before_rename_space_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_1';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_2';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_3';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_log_4';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_log_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_1';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_1';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_2';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_2';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_3';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_3';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_rename_space_delete_4';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_rename_space_delete_4';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_before_post_ddl';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
SET SESSION DEBUG = '-d,ddl_log_before_post_ddl';
DROP TABLE t1;
CREATE TABLE t1
(a INT NOT NULL AUTO_INCREMENT PRIMARY KEY, b VARCHAR(100), c INT NOT NULL, KEY(c)) ENGINE=InnoDB
PARTITION BY RANGE(a) PARTITIONS 2
( PARTITION p0 VALUES LESS THAN (10),
PARTITION p1 VALUES LESS THAN (20));
SET GLOBAL innodb_ddl_log_crash_reset_debug = 1;
SET SESSION DEBUG = '+d,ddl_log_crash_after_replay_1';
ALTER TABLE t1 EXCHANGE PARTITION p1 WITH TABLE t2;
# No such crash injection, statement did not crash, cleaning up
SET SESSION DEBUG = '-d,ddl_log_crash_after_replay_1';
DROP TABLE t1;
CHECK TABLE t2;
Table	Op	Msg_type	Msg_text
test.t2	check	status	OK
DROP TABLE t2;
DROP TABLESPACE ts1;
DROP TABLESPACE ts2;
SET GLOBAL innodb_ddl_log_crash_reset_debug = 0;
