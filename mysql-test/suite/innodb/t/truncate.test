
CREATE TABLESPACE ts1 ADD DATAFILE 'ts1.ibd';
CREATE TABLESPACE ts2 ADD DATAFILE 'ts2.ibd';

CREATE TABLE t1 (
  a INT NOT NULL,
  PRIMARY KEY (a)
)
ENGINE=InnoDB TABLESPACE ts1;

CREATE TABLE t1p (
  a INT NOT NULL,
  PRIMARY KEY (a)
)
ENGINE=InnoDB
PARTITION BY RANGE (a)
PARTITIONS 2
(PARTITION P1 VALUES LESS THAN (2) TABLESPACE ts1,
 PARTITION P2 VALUES LESS THAN (4) TABLESPACE ts2);

TRUNCATE TABLE t1;
TRUNCATE TABLE t1p;

ALTER TABLE t1p TRUNCATE PARTITION P2;

--replace_result #P #p
SELECT t.NAME, ts.NAME
FROM information_schema.innodb_tables t
LEFT JOIN information_schema.innodb_tablespaces ts
ON t.SPACE = ts.SPACE
WHERE t.NAME LIKE '%t1%' ORDER BY t.NAME;

DROP TABLE t1, t1p;
DROP TABLESPACE ts1;
DROP TABLESPACE ts2;
