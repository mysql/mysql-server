--source include/have_innodb.inc

# Test alter table add column
CREATE TABLE t_8114 (a int) ENGINE = INNODB;

ALTER TABLE t_8114 ADD b INT GENERATED  ALWAYS AS (a) VIRTUAL;

SELECT NAME FROM INFORMATION_SCHEMA.INNODB_SYS_TABLES WHERE NAME LIKE "%t_8114";

SELECT NAME, POS, MTYPE, PRTYPE, LEN FROM INFORMATION_SCHEMA.INNODB_SYS_COLUMNS WHERE TABLE_ID IN (SELECT TABLE_ID FROM INFORMATION_SCHEMA.INNODB_SYS_TABLES WHERE NAME LIKE "%t_8114");

INSERT INTO t_8114 VALUES (9, default);
INSERT INTO t_8114 VALUES (3, default);
INSERT INTO t_8114 VALUES (1, default);
INSERT INTO t_8114 VALUES (5, default);

SELECT * FROM t_8114;

DROP TABLE t_8114;

CREATE TABLE t_8114 (Column_1 CHAR(5) GENERATED ALWAYS AS (PI()+5), Column_2  CHAR(5));

SELECT NAME, FLAG, N_COLS FROM INFORMATION_SCHEMA.INNODB_SYS_TABLES WHERE NAME LIKE "%t_8114";

SELECT NAME, POS, MTYPE, PRTYPE, LEN FROM INFORMATION_SCHEMA.INNODB_SYS_COLUMNS WHERE TABLE_ID IN (SELECT TABLE_ID FROM INFORMATION_SCHEMA.INNODB_SYS_TABLES WHERE NAME LIKE "%t_8114");

INSERT INTO t_8114 VALUES (default, "aa");
INSERT INTO t_8114 VALUES (default, "bb");
INSERT INTO t_8114 VALUES (default, "ee");
INSERT INTO t_8114 VALUES (default, "pp");

SELECT * FROM t_8114;

ALTER TABLE t_8114 DROP Column_1;

SELECT NAME FROM INFORMATION_SCHEMA.INNODB_SYS_TABLES WHERE NAME LIKE "%t_8114";

SELECT NAME, POS, MTYPE, PRTYPE, LEN FROM INFORMATION_SCHEMA.INNODB_SYS_COLUMNS WHERE TABLE_ID IN (SELECT TABLE_ID FROM INFORMATION_SCHEMA.INNODB_SYS_TABLES WHERE NAME LIKE "%t_8114");

SELECT * FROM t_8114;

DROP TABLE t_8114;
