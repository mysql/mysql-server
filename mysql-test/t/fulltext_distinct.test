#
# Test of fulltext index
# bug reported by  Tibor Simko <tibor.simko@cern.ch>
#

   DROP TABLE IF EXISTS t1;
   CREATE TABLE t1 (
     id mediumint unsigned NOT NULL auto_increment,
     tag char(6) NOT NULL default '',
     value text NOT NULL default '',
     PRIMARY KEY (id),
     KEY kt(tag),
     KEY kv(value(15)),
     FULLTEXT KEY kvf(value)
   ) TYPE=MyISAM;
   DROP TABLE IF EXISTS t2;
   CREATE TABLE t2 (
     id_t2 mediumint unsigned NOT NULL default '0',
     id_t1 mediumint unsigned NOT NULL default '0',
     field_number tinyint unsigned NOT NULL default '0',
     PRIMARY KEY (id_t2,id_t1,field_number),
     KEY id_t1(id_t1)
   ) TYPE=MyISAM;

   INSERT INTO t1 (tag,value) VALUES ('foo123','bar111');
   INSERT INTO t2 VALUES (2231626,64280,0);
   INSERT INTO t1 (tag,value) VALUES ('foo123','bar222');
   INSERT INTO t2 VALUES (2231626,64281,0);
insert into t1 (tag,value) values ('bar345','baz333 ar');
insert into t2 values (12346, 3, 1);

select * from t1; select * from t2;

   SELECT DISTINCT t2.id_t2
     FROM t2, t1
    WHERE MATCH (t1.value) AGAINST ('baz333')
    AND t1.id = t2.id_t1;

DROP TABLE t1,t2;
