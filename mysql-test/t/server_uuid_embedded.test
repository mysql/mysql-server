##############################################################################
# WL#4677 Unique Server Ids for Replication Topology (UUIDs)                 #
# 
# Each server has a UUID generated by server itself. It is stored in auto.cnf
# in @@DATADIR directory. 
#
# @@SERVER_UUID is a readonly system variable, it is initialized as the
# server's UUID when starting. Users can get the server's UUID from
# @@SERVER_UUID.
#
# This test case tests whether the server's UUID can be generated, stored,
# initialized correctly.
##############################################################################
source include/is_embedded.inc;

--echo
--echo # Case 1:
--echo # @@SERVER_UUID is readonly.
--echo -----------------------------------------------------------------------------
--error 1238
SET GLOBAL SERVER_UUID= UUID();

--echo
--echo # Case 2:
--echo # SERVER_UUID is not null
--echo -----------------------------------------------------------------------------
--let $server_uuid= query_get_value(SELECT @@SERVER_UUID, @@SERVER_UUID, 1)
# Cannot use !$server_uuid since it may begin with 0
if ($server_uuid == '')
{
  --echo server's UUID is null
}
