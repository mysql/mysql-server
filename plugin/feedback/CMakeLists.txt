INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/sql ${CMAKE_SOURCE_DIR}/regex
                    ${SSL_INCLUDE_DIRS})

SET(FEEDBACK_SOURCES feedback.cc sender_thread.cc
    url_base.cc url_http.cc utils.cc)

ADD_DEFINITIONS(${SSL_DEFINES})

INCLUDE (CheckIncludeFiles)
CHECK_INCLUDE_FILES (netdb.h HAVE_NETDB_H)
IF(HAVE_NETDB_H)
  ADD_DEFINITIONS(-DHAVE_NETDB_H)
ENDIF(HAVE_NETDB_H)

IF(WIN32)
  MYSQL_ADD_PLUGIN(FEEDBACK ${FEEDBACK_SOURCES}
    LINK_LIBRARIES ${SSL_LIBRARIES}
    STATIC_ONLY DEFAULT)
ELSE(WIN32)
  MYSQL_ADD_PLUGIN(FEEDBACK ${FEEDBACK_SOURCES}
    LINK_LIBRARIES ${SSL_LIBRARIES})
ENDIF(WIN32)
